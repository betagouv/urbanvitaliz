!function(){"use strict";function e(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function t(t,r){return fetch(t,r).then(e)}function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function n(e,t){return fetch(e,t).then(r)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function s(e){var t={exports:{}};return e(t,t.exports),t.exports}var i=s((function(e,t){e.exports=function(){var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t=p,r=a,n=function(e){return c(a(e))},s=c,i=d,o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e){for(var t,r=[],n=0,s=0,i="";null!=(t=o.exec(e));){var a=t[0],c=t[1],u=t.index;if(i+=e.slice(s,u),s=u+a.length,c)i+=c[1];else{i&&(r.push(i),i="");var h=t[2],f=t[3],d=t[4],p=t[5],m=t[6],g=t[7],v="+"===m||"*"===m,y="?"===m||"*"===m,k=h||"/",b=d||p||(g?".*":"[^"+k+"]+?");r.push({name:f||n++,prefix:h||"",delimiter:k,optional:y,repeat:v,pattern:l(b)})}}return s<e.length&&(i+=e.substr(s)),i&&r.push(i),r}function c(t){for(var r=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(r[n]=new RegExp("^"+t[n].pattern+"$"));return function(n){for(var s="",i=n||{},o=0;o<t.length;o++){var a=t[o];if("string"!=typeof a){var c,u=i[a.name];if(null==u){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(e(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(c=encodeURIComponent(u[l]),!r[o].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');s+=(0===l?a.prefix:a.delimiter)+c}}else{if(c=encodeURIComponent(u),!r[o].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');s+=a.prefix+c}}else s+=a}return s}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function f(e){return e.sensitive?"":"i"}function d(e,t){for(var r=(t=t||{}).strict,n=!1!==t.end,s="",i=e[e.length-1],o="string"==typeof i&&/\/$/.test(i),a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)s+=u(c);else{var l=u(c.prefix),h=c.pattern;c.repeat&&(h+="(?:"+l+h+")*"),s+=h=c.optional?l?"(?:"+l+"("+h+"))?":"("+h+")?":l+"("+h+")"}}return r||(s=(o?s.slice(0,-2):s)+"(?:\\/(?=$))?"),s+=n?"$":r&&o?"":"(?=\\/|$)",new RegExp("^"+s,f(t))}function p(t,r,n){return e(r=r||[])?n||(n={}):(n=r,r=[]),t instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return h(e,t)}(t,r):e(t)?function(e,t,r){for(var n=[],s=0;s<e.length;s++)n.push(p(e[s],t,r).source);return h(new RegExp("(?:"+n.join("|")+")",f(r)),t)}(t,r,n):function(e,t,r){for(var n=a(e),s=d(n,r),i=0;i<n.length;i++)"string"!=typeof n[i]&&t.push(n[i]);return h(s,t)}(t,r,n)}t.parse=r,t.compile=n,t.tokensToFunction=s,t.tokensToRegExp=i;var m,g="undefined"!=typeof document,v="undefined"!=typeof window,y="undefined"!=typeof history,k="undefined"!=typeof process,b=g&&document.ontouchstart?"touchstart":"click",w=v&&!(!window.history.location&&!window.location);function _(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function R(e,t){if("function"==typeof e)return R.call(this,"*",e);if("function"==typeof t)for(var r=new C(e,null,this),n=1;n<arguments.length;++n)this.callbacks.push(r.middleware(arguments[n]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function x(e){if(!e.handled){var t=this._window;(this._hashbang?w&&this._getBase()+t.location.hash.replace("#!",""):w&&t.location.pathname+t.location.search)!==e.canonicalPath&&(this.stop(),e.handled=!1,w&&(t.location.href=e.canonicalPath))}}function $(e,t,r){var n=this.page=r||R,s=n._window,i=n._hashbang,o=n._getBase();"/"===e[0]&&0!==e.indexOf(o)&&(e=o+(i?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var c=new RegExp("^"+o.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=e.replace(c,"")||"/",i&&(this.path=this.path.replace("#!","")||"/"),this.title=g&&s.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?n._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=n._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!i){if(!~this.path.indexOf("#"))return;var u=this.path.split("#");this.path=this.pathname=u[0],this.hash=n._decodeURLEncodedURIComponent(u[1])||"",this.querystring=this.querystring.split("#")[0]}}function C(e,r,n){var s=this.page=n||S,i=r||{};i.strict=i.strict||s._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=t(this.path,this.keys=[],i)}_.prototype.configure=function(e){var t=e||{};this._window=t.window||v&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&v,this._click=!1!==t.click&&g,this._hashbang=!!t.hashbang;var r=this._window;this._popstate?r.addEventListener("popstate",this._onpopstate,!1):v&&r.removeEventListener("popstate",this._onpopstate,!1),this._click?r.document.addEventListener(b,this.clickHandler,!1):g&&r.document.removeEventListener(b,this.clickHandler,!1),this._hashbang&&v&&!y?r.addEventListener("hashchange",this._onpopstate,!1):v&&r.removeEventListener("hashchange",this._onpopstate,!1)},_.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},_.prototype._getBase=function(){var e=this._base;if(e)return e;var t=v&&this._window&&this._window.location;return v&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},_.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},_.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var r;if(this._running=!0,w){var n=this._window.location;r=this._hashbang&&~n.hash.indexOf("#!")?n.hash.substr(2)+n.search:this._hashbang?n.search+n.hash:n.pathname+n.search+n.hash}this.replace(r,null,!0,t.dispatch)}},_.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(b,this.clickHandler,!1),v&&e.removeEventListener("popstate",this._onpopstate,!1),v&&e.removeEventListener("hashchange",this._onpopstate,!1)}},_.prototype.show=function(e,t,r,n){var s=new $(e,t,this),i=this.prevContext;return this.prevContext=s,this.current=s.path,!1!==r&&this.dispatch(s,i),!1!==s.handled&&!1!==n&&s.pushState(),s},_.prototype.back=function(e,t){var r=this;if(this.len>0){var n=this._window;y&&n.history.back(),this.len--}else e?setTimeout((function(){r.show(e,t)})):setTimeout((function(){r.show(r._getBase(),t)}))},_.prototype.redirect=function(e,t){var r=this;"string"==typeof e&&"string"==typeof t&&R.call(this,e,(function(e){setTimeout((function(){r.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){r.replace(e)}),0)},_.prototype.replace=function(e,t,r,n){var s=new $(e,t,this),i=this.prevContext;return this.prevContext=s,this.current=s.path,s.init=r,s.save(),!1!==n&&this.dispatch(s,i),s},_.prototype.dispatch=function(e,t){var r=0,n=0,s=this;function i(){var t=s.callbacks[r++];if(e.path===s.current)return t?void t(e,i):x.call(s,e);e.handled=!1}t?function e(){var r=s.exits[n++];if(!r)return i();r(t,e)}():i()},_.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var r=new C(e,null,this),n=1;n<arguments.length;++n)this.exits.push(r.middleware(arguments[n]))},_.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,r=e.path||(e.composedPath?e.composedPath():null);if(r)for(var n=0;n<r.length;n++)if(r[n].nodeName&&"A"===r[n].nodeName.toUpperCase()&&r[n].href){t=r[n];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var s="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var i=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==i)&&!(i&&i.indexOf("mailto:")>-1)&&!(s?t.target.baseVal:t.target)&&(s||this.sameOrigin(t.href))){var o=s?t.href.baseVal:t.pathname+t.search+(t.hash||"");o="/"!==o[0]?"/"+o:o,k&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var a=o,c=this._getBase();0===o.indexOf(c)&&(o=o.substr(c.length)),this._hashbang&&(o=o.replace("#!","")),(!c||a!==o||w&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(a))}}}}},_.prototype._onpopstate=(m=!1,v?(g&&"complete"===document.readyState?m=!0:window.addEventListener("load",(function(){setTimeout((function(){m=!0}),0)})),function(e){if(m)if(e.state){var t=e.state.path;this.replace(t,e.state)}else if(w){var r=this._window.location;this.show(r.pathname+r.search+r.hash,void 0,void 0,!1)}}):function(){}),_.prototype._which=function(e){return null==(e=e||v&&this._window.event).which?e.button:e.which},_.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&w)return new URL(e,t.location.toString());if(g){var r=t.document.createElement("a");return r.href=e,r}},_.prototype.sameOrigin=function(e){if(!e||!w)return!1;var t=this._toURL(e),r=this._window.location;return r.protocol===t.protocol&&r.hostname===t.hostname&&(r.port===t.port||""===r.port&&(80==t.port||443==t.port))},_.prototype._samePath=function(e){if(!w)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},_.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},$.prototype.pushState=function(){var e=this.page,t=e._window,r=e._hashbang;e.len++,y&&t.history.pushState(this.state,this.title,r&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},$.prototype.save=function(){var e=this.page;y&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},C.prototype.middleware=function(e){var t=this;return function(r,n){if(t.match(r.path,r.params))return r.routePath=t.path,e(r,n);n()}},C.prototype.match=function(e,t){var r=this.keys,n=e.indexOf("?"),s=~n?e.slice(0,n):e,i=this.regexp.exec(decodeURIComponent(s));if(!i)return!1;delete t[0];for(var o=1,a=i.length;o<a;++o){var c=r[o-1],u=this.page._decodeURLEncodedURIComponent(i[o]);void 0===u&&hasOwnProperty.call(t,c.name)||(t[c.name]=u)}return!0};var S=function e(){var t=new _;function r(){return R.apply(t,arguments)}return r.callbacks=t.callbacks,r.exits=t.exits,r.base=t.base.bind(t),r.strict=t.strict.bind(t),r.start=t.start.bind(t),r.stop=t.stop.bind(t),r.show=t.show.bind(t),r.back=t.back.bind(t),r.redirect=t.redirect.bind(t),r.replace=t.replace.bind(t),r.dispatch=t.dispatch.bind(t),r.exit=t.exit.bind(t),r.configure=t.configure.bind(t),r.sameOrigin=t.sameOrigin.bind(t),r.clickHandler=t.clickHandler.bind(t),r.create=e,Object.defineProperty(r,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(r,"current",{get:function(){return t.current},set:function(e){t.current=e}}),r.Context=$,r.Route=C,r}(),E=S,L=S;return E.default=L,E}()}));function o(){}function a(e){return e()}function c(){return Object.create(null)}function u(e){e.forEach(a)}function l(e){return"function"==typeof e}function h(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function f(e,t,r,n){if(e){const s=d(e,t,r,n);return e[0](s)}}function d(e,t,r,n){return e[1]&&n?function(e,t){for(const r in t)e[r]=t[r];return e}(r.ctx.slice(),e[1](n(t))):r.ctx}function p(e,t,r,n,s,i,o){const a=function(e,t,r,n){if(e[2]&&n){const s=e[2](n(r));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],r=Math.max(t.dirty.length,s.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|s[n];return e}return t.dirty|s}return t.dirty}(t,n,s,i);if(a){const s=d(t,r,n,o);e.p(s,a)}}function m(e,t){e.appendChild(t)}function g(e,t,r){e.insertBefore(t,r||null)}function v(e){e.parentNode.removeChild(e)}function y(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function k(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function w(){return b(" ")}function _(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function R(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}class C{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,r=null){this.e||(this.e=k(t.nodeName),this.t=t,this.h(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)g(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(v)}}let S;function E(e){S=e}function L(){const e=function(){if(!S)throw new Error("Function called outside component initialization");return S}();return(t,r)=>{const n=e.$$.callbacks[t];if(n){const s=function(e,t){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!1,t),r}(t,r);n.slice().forEach(t=>{t.call(e,s)})}}}const T=[],P=[],Q=[],q=[],I=Promise.resolve();let F=!1;function O(e){Q.push(e)}let U=!1;const j=new Set;function A(){if(!U){U=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];E(t),N(t.$$)}for(E(null),T.length=0;P.length;)P.pop()();for(let e=0;e<Q.length;e+=1){const t=Q[e];j.has(t)||(j.add(t),t())}Q.length=0}while(T.length);for(;q.length;)q.pop()();F=!1,U=!1,j.clear()}}function N(e){if(null!==e.fragment){e.update(),u(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const z=new Set;let B;function D(){B={r:0,c:[],p:B}}function V(){B.r||u(B.c),B=B.p}function M(e,t){e&&e.i&&(z.delete(e),e.i(t))}function W(e,t,r,n){if(e&&e.o){if(z.has(e))return;z.add(e),B.c.push(()=>{z.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}}function H(e){e&&e.c()}function J(e,t,r,n){const{fragment:s,on_mount:i,on_destroy:o,after_update:c}=e.$$;s&&s.m(t,r),n||O(()=>{const t=i.map(a).filter(l);o?o.push(...t):u(t),e.$$.on_mount=[]}),c.forEach(O)}function G(e,t){const r=e.$$;null!==r.fragment&&(u(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Y(e,t){-1===e.$$.dirty[0]&&(T.push(e),F||(F=!0,I.then(A)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(e,t,r,n,s,i,a=[-1]){const l=S;E(e);const h=e.$$={fragment:null,ctx:null,props:i,update:o,not_equal:s,bound:c(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:c(),dirty:a,skip_bound:!1};let f=!1;if(h.ctx=r?r(e,t.props||{},(t,r,...n)=>{const i=n.length?n[0]:r;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&Y(e,t)),r}):[],h.update(),f=!0,u(h.before_update),h.fragment=!!n&&n(h.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);h.fragment&&h.fragment.l(e),e.forEach(v)}else h.fragment&&h.fragment.c();t.intro&&M(e.$$.fragment),J(e,t.target,t.anchor,t.customElement),A()}E(l)}class Z{$destroy(){G(this,1),this.$destroy=o}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function X(e,t,r){const n=e.slice();return n[7]=t[r],n}function ee(e,t,r){const n=e.slice();return n[10]=t[r],n}function te(e){let t,r,n,s,i,o,a,c,u,l=e[10]+"";function h(...t){return e[5](e[10],...t)}return{c(){t=k("div"),r=k("label"),n=k("input"),i=w(),o=b(l),a=w(),R(n,"type","checkbox"),R(n,"name","Étape"),n.checked=s=e[4].étapes.has(e[10]),R(n,"class","svelte-1ak23p6"),R(r,"class","svelte-1ak23p6"),R(t,"class","NOT-rf-checkbox-group")},m(e,s){g(e,t,s),m(t,r),m(r,n),m(r,i),m(r,o),m(t,a),c||(u=_(n,"change",h),c=!0)},p(t,r){e=t,17&r&&s!==(s=e[4].étapes.has(e[10]))&&(n.checked=s),1&r&&l!==(l=e[10]+"")&&x(o,l)},d(e){e&&v(t),c=!1,u()}}}function re(e){let t,r,n,s,i,o,a,c,u,l=e[7]+"";function h(...t){return e[6](e[7],...t)}return{c(){t=k("div"),r=k("label"),n=k("input"),i=w(),o=b(l),a=w(),R(n,"type","checkbox"),R(n,"name","Thématique"),n.checked=s=e[4].thématiques.has(e[7]),R(n,"class","svelte-1ak23p6"),R(r,"class","svelte-1ak23p6"),R(t,"class","NOT-rf-checkbox-group")},m(e,s){g(e,t,s),m(t,r),m(r,n),m(r,i),m(r,o),m(t,a),c||(u=_(n,"change",h),c=!0)},p(t,r){e=t,18&r&&s!==(s=e[4].thématiques.has(e[7]))&&(n.checked=s),2&r&&l!==(l=e[7]+"")&&x(o,l)},d(e){e&&v(t),c=!1,u()}}}function ne(e){let t,r,n,s,i,a,c,u,l,h,f,d,p,b,_=e[0],x=[];for(let t=0;t<_.length;t+=1)x[t]=te(ee(e,_,t));let $=e[1],C=[];for(let t=0;t<$.length;t+=1)C[t]=re(X(e,$,t));return{c(){t=k("section"),r=k("section"),n=k("div"),s=k("fieldset"),i=k("legend"),i.textContent="Filtrer par étapes",a=w(),c=k("div");for(let e=0;e<x.length;e+=1)x[e].c();u=w(),l=k("section"),h=k("div"),f=k("fieldset"),d=k("legend"),d.textContent="Filtrer par thématiques",p=w(),b=k("div");for(let e=0;e<C.length;e+=1)C[e].c();R(i,"class","rf-fieldset__legend svelte-1ak23p6"),R(c,"class","rf-fieldset__content svelte-1ak23p6"),R(s,"class","rf-fieldset"),R(n,"class","rf-form-group"),R(r,"class","étapes svelte-1ak23p6"),R(d,"class","rf-fieldset__legend svelte-1ak23p6"),R(b,"class","rf-fieldset__content svelte-1ak23p6"),R(f,"class","rf-fieldset rf-fieldset--inline"),R(h,"class","rf-form-group"),R(l,"class","thématiques svelte-1ak23p6"),R(t,"class","filters svelte-1ak23p6")},m(e,o){g(e,t,o),m(t,r),m(r,n),m(n,s),m(s,i),m(s,a),m(s,c);for(let e=0;e<x.length;e+=1)x[e].m(c,null);m(t,u),m(t,l),m(l,h),m(h,f),m(f,d),m(f,p),m(f,b);for(let e=0;e<C.length;e+=1)C[e].m(b,null)},p(e,[t]){if(21&t){let r;for(_=e[0],r=0;r<_.length;r+=1){const n=ee(e,_,r);x[r]?x[r].p(n,t):(x[r]=te(n),x[r].c(),x[r].m(c,null))}for(;r<x.length;r+=1)x[r].d(1);x.length=_.length}if(26&t){let r;for($=e[1],r=0;r<$.length;r+=1){const n=X(e,$,r);C[r]?C[r].p(n,t):(C[r]=re(n),C[r].c(),C[r].m(b,null))}for(;r<C.length;r+=1)C[r].d(1);C.length=$.length}},i:o,o:o,d(e){e&&v(t),y(x,e),y(C,e)}}}function se(e,t,r){let{"étapes":n}=t,{"thématiques":s}=t,{"étapeFilterChange":i}=t,{"thématiqueFilterChange":o}=t,{filters:a}=t;return e.$$set=e=>{"étapes"in e&&r(0,n=e.étapes),"thématiques"in e&&r(1,s=e.thématiques),"étapeFilterChange"in e&&r(2,i=e.étapeFilterChange),"thématiqueFilterChange"in e&&r(3,o=e.thématiqueFilterChange),"filters"in e&&r(4,a=e.filters)},[n,s,i,o,a,(e,t)=>i(e),(e,t)=>o(e)]}class ie extends Z{constructor(e){super(),K(this,e,se,ne,h,{"étapes":0,"thématiques":1,"étapeFilterChange":2,"thématiqueFilterChange":3,filters:4})}}var oe=location.origin.includes("betagouv.github.io")?"/urbanvitaliz":"";function ae(e){let t,r,n=(e[0].sous_titre||"")+"";return{c(){t=k("section"),r=b(n),R(t,"class","sous_titre svelte-1f330li")},m(e,n){g(e,t,n),m(t,r)},p(e,t){1&t&&n!==(n=(e[0].sous_titre||"")+"")&&x(r,n)},d(e){e&&v(t)}}}function ce(e){let t,r,n;return{c(){t=k("button"),t.textContent="🌟 Supprimer",R(t,"class","rf-btn rf-btn--secondary svelte-1f330li")},m(s,i){g(s,t,i),r||(n=_(t,"click",(function(){l(e[2])&&e[2].apply(this,arguments)})),r=!0)},p(t,r){e=t},d(e){e&&v(t),r=!1,n()}}}function ue(e){let t,r,n;return{c(){t=k("button"),t.textContent="☆ Enregistrer",R(t,"class","rf-btn rf-btn--secondary svelte-1f330li")},m(s,i){g(s,t,i),r||(n=_(t,"click",(function(){l(e[1])&&e[1].apply(this,arguments)})),r=!0)},p(t,r){e=t},d(e){e&&v(t),r=!1,n()}}}function le(e){let t,r,n,s,i,a,c,u,l,h,f,d=e[0].phrase_catch+"",p=e[0].sous_titre&&ae(e),y="function"==typeof e[2]&&ce(e),_="function"==typeof e[1]&&ue(e);return{c(){t=k("article"),r=k("a"),n=k("div"),s=k("img"),a=k("h1"),c=b(d),l=w(),p&&p.c(),h=w(),y&&y.c(),f=w(),_&&_.c(),s.src!==(i=oe+"/assets/images/newspaper-read-woman.svg")&&R(s,"src",i),R(s,"alt","Femme qui lit un livre"),R(s,"class","svelte-1f330li"),R(a,"class","svelte-1f330li"),R(n,"class","title svelte-1f330li"),R(r,"href",u=e[0].url),R(r,"class","svelte-1f330li"),R(t,"class","svelte-1f330li")},m(e,i){g(e,t,i),m(t,r),m(r,n),m(n,s),m(n,a),m(a,c),m(t,l),p&&p.m(t,null),m(t,h),y&&y.m(t,null),m(t,f),_&&_.m(t,null)},p(e,[n]){1&n&&d!==(d=e[0].phrase_catch+"")&&x(c,d),1&n&&u!==(u=e[0].url)&&R(r,"href",u),e[0].sous_titre?p?p.p(e,n):(p=ae(e),p.c(),p.m(t,h)):p&&(p.d(1),p=null),"function"==typeof e[2]?y?y.p(e,n):(y=ce(e),y.c(),y.m(t,f)):y&&(y.d(1),y=null),"function"==typeof e[1]?_?_.p(e,n):(_=ue(e),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:o,o:o,d(e){e&&v(t),p&&p.d(),y&&y.d(),_&&_.d()}}}function he(e,t,r){let{resource:n}=t,{bookmarkResource:s}=t,{unbookmarkResource:i}=t;return e.$$set=e=>{"resource"in e&&r(0,n=e.resource),"bookmarkResource"in e&&r(1,s=e.bookmarkResource),"unbookmarkResource"in e&&r(2,i=e.unbookmarkResource)},[n,s,i]}class fe extends Z{constructor(e){super(),K(this,e,he,le,h,{resource:0,bookmarkResource:1,unbookmarkResource:2})}}function de(e,t,r){const n=e.slice();return n[4]=t[r],n}function pe(e){let t,r,n=e[0],s=[];for(let t=0;t<n.length;t+=1)s[t]=ge(de(e,n,t));const i=e=>W(s[e],1,1,()=>{s[e]=null});return{c(){t=k("ul");for(let e=0;e<s.length;e+=1)s[e].c();R(t,"class","svelte-hqtwa1")},m(e,n){g(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null);r=!0},p(e,r){if(15&r){let o;for(n=e[0],o=0;o<n.length;o+=1){const i=de(e,n,o);s[o]?(s[o].p(i,r),M(s[o],1)):(s[o]=ge(i),s[o].c(),M(s[o],1),s[o].m(t,null))}for(D(),o=n.length;o<s.length;o+=1)i(o);V()}},i(e){if(!r){for(let e=0;e<n.length;e+=1)M(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)W(s[e]);r=!1},d(e){e&&v(t),y(s,e)}}}function me(e){let t;return{c(){t=k("p"),t.textContent="(Pas de ressource)"},m(e,r){g(e,t,r)},p:o,i:o,o:o,d(e){e&&v(t)}}}function ge(e){let t,r,n,s;return r=new fe({props:{resource:e[4],bookmarkResource:e[1]&&!e[3].has(e[4].id)&&e[1](e[4].id),unbookmarkResource:e[2]&&e[3].has(e[4].id)&&e[2](e[4].id)}}),{c(){t=k("li"),H(r.$$.fragment),n=w(),R(t,"class","svelte-hqtwa1")},m(e,i){g(e,t,i),J(r,t,null),m(t,n),s=!0},p(e,t){const n={};1&t&&(n.resource=e[4]),11&t&&(n.bookmarkResource=e[1]&&!e[3].has(e[4].id)&&e[1](e[4].id)),13&t&&(n.unbookmarkResource=e[2]&&e[3].has(e[4].id)&&e[2](e[4].id)),r.$set(n)},i(e){s||(M(r.$$.fragment,e),s=!0)},o(e){W(r.$$.fragment,e),s=!1},d(e){e&&v(t),G(r)}}}function ve(e){let t,r,n,s;const i=[me,pe],o=[];function a(e,t){return 0===e[0].length?0:1}return r=a(e),n=o[r]=i[r](e),{c(){t=k("section"),n.c()},m(e,n){g(e,t,n),o[r].m(t,null),s=!0},p(e,[s]){let c=r;r=a(e),r===c?o[r].p(e,s):(D(),W(o[c],1,1,()=>{o[c]=null}),V(),n=o[r],n?n.p(e,s):(n=o[r]=i[r](e),n.c()),M(n,1),n.m(t,null))},i(e){s||(M(n),s=!0)},o(e){W(n),s=!1},d(e){e&&v(t),o[r].d()}}}function ye(e,t,r){let{resources:n}=t,{makeBookmarkResource:s}=t,{makeUnbookmarkResource:i}=t,{bookmarkedResourceIdSet:o}=t;return e.$$set=e=>{"resources"in e&&r(0,n=e.resources),"makeBookmarkResource"in e&&r(1,s=e.makeBookmarkResource),"makeUnbookmarkResource"in e&&r(2,i=e.makeUnbookmarkResource),"bookmarkedResourceIdSet"in e&&r(3,o=e.bookmarkedResourceIdSet)},e.$$.update=()=>{1&e.$$.dirty&&console.log(n)},[n,s,i,o]}class ke extends Z{constructor(e){super(),K(this,e,ye,ve,h,{resources:0,makeBookmarkResource:1,makeUnbookmarkResource:2,bookmarkedResourceIdSet:3})}}const be=e=>({}),we=e=>({}),_e=e=>({}),Re=e=>({});function xe(e){let t,r,n,s,i,o,a,c,u,l,h,d,y,_,x,$,C,S,E,L,T,P,Q,q,I,F,O,U,j,A,N,z,B,D,V,H,J,G;const Y=e[2]["colonne-du-centre"],K=f(Y,e,e[1],Re),Z=e[2]["colonne-de-droite"],X=f(Z,e,e[1],we);return{c(){t=k("div"),r=k("section"),n=k("nav"),s=k("div"),i=k("button"),i.textContent="Dans cette rubrique",o=w(),a=k("div"),c=k("ul"),u=k("li"),l=k("a"),h=k("img"),y=b("Rechercher une ressource"),_=w(),x=k("li"),$=k("a"),C=k("img"),E=b("Parcours méthodologie"),L=w(),T=k("li"),P=k("a"),Q=k("img"),I=b("Mes ressources"),F=w(),O=k("li"),U=k("a"),j=k("img"),N=b("Toutes les ressources"),z=w(),B=k("section"),B.innerHTML='<p>Vous n&#39;avez pas trouvé de quoi faire avancer votre projet de friche ?</p> \n            <a href="https://urbanvitaliz.fr/contact/" class="rf-btn rf-btn--secondary">Contactez-nous<span class="rf-fi-mail-line svelte-4nubv1" aria-hidden="true"></span></a>',D=w(),V=k("section"),K&&K.c(),H=w(),J=k("section"),X&&X.c(),R(i,"class","rf-sidemenu__btn"),i.hidden=!0,R(i,"aria-controls","rf-sidemenu-wrapper"),R(i,"aria-expanded","false"),h.src!==(d=oe+"/assets/images/search-bar.svg")&&R(h,"src",d),R(h,"alt","mage de recherche"),R(h,"class","svelte-4nubv1"),R(l,"class","rf-sidemenu__link svelte-4nubv1"),R(l,"href","https://urbanvitaliz.fr/ressource/"),R(u,"class","rf-sidemenu__item"),C.src!==(S=oe+"/assets/images/hierarchy-6.svg")&&R(C,"src",S),R(C,"alt","image de hierachy de fichiers"),R(C,"class","svelte-4nubv1"),R($,"class","rf-sidemenu__link svelte-4nubv1"),R($,"href",oe+"/bacasable_perrine/home3_choix_chapitre.html"),R(x,"class","rf-sidemenu__item"),Q.src!==(q=oe+"/assets/images/common-file-star.svg")&&R(Q,"src",q),R(Q,"alt","Fichier avec une étoile"),R(Q,"class","svelte-4nubv1"),R(P,"class","rf-sidemenu__link svelte-4nubv1"),R(P,"href","https://urbanvitaliz.fr/ma-collectivite/"),R(T,"class","rf-sidemenu__item"),j.src!==(A=oe+"/assets/images/hierarchy-files-1.svg")&&R(j,"src",A),R(j,"alt","image de plusieurs hierachy de dossiers"),R(j,"class","svelte-4nubv1"),R(U,"class","rf-sidemenu__link svelte-4nubv1"),R(U,"href","https://urbanvitaliz.fr/ressource/"),R(O,"class","rf-sidemenu__item"),R(c,"class","rf-sidemenu__list"),R(a,"class","rf-collapse"),R(a,"id","rf-sidemenu-wrapper"),R(s,"class","rf-sidemenu__inner svelte-4nubv1"),R(n,"class","rf-sidemenu svelte-4nubv1"),R(n,"aria-label","Menu latéral"),R(B,"class","contact svelte-4nubv1"),R(r,"class","colonne-de-gauche svelte-4nubv1"),R(V,"class","colonne-du-centre svelte-4nubv1"),R(J,"class","colonne-de-droite svelte-4nubv1"),R(t,"class","flex-container svelte-4nubv1")},m(e,f){g(e,t,f),m(t,r),m(r,n),m(n,s),m(s,i),m(s,o),m(s,a),m(a,c),m(c,u),m(u,l),m(l,h),m(l,y),m(c,_),m(c,x),m(x,$),m($,C),m($,E),m(c,L),m(c,T),m(T,P),m(P,Q),m(P,I),m(c,F),m(c,O),m(O,U),m(U,j),m(U,N),m(r,z),m(r,B),m(t,D),m(t,V),K&&K.m(V,null),m(t,H),m(t,J),X&&X.m(J,null),G=!0},p(e,[t]){K&&K.p&&2&t&&p(K,Y,e,e[1],t,_e,Re),X&&X.p&&2&t&&p(X,Z,e,e[1],t,be,we)},i(e){G||(M(K,e),M(X,e),G=!0)},o(e){W(K,e),W(X,e),G=!1},d(e){e&&v(t),K&&K.d(e),X&&X.d(e)}}}function $e(e,t,r){let{$$slots:n={},$$scope:s}=t,{listeRessourceURL:i=""}=t;return e.$$set=e=>{"listeRessourceURL"in e&&r(0,i=e.listeRessourceURL),"$$scope"in e&&r(1,s=e.$$scope)},[i,s,n]}class Ce extends Z{constructor(e){super(),K(this,e,$e,xe,h,{listeRessourceURL:0})}}function Se(e=[],t){return e.filter(e=>e.etape.some(e=>t.étapes.has(e))&&e.thematique.some(e=>t.thématiques.has(e)))}function Ee(e){let t,r,n,s,i,o,a,c,u,l,h=e[7].length+"";return n=new ie({props:{"étapes":e[0],"thématiques":e[1],filters:e[6],"étapeFilterChange":e[8],"thématiqueFilterChange":e[9]}}),u=new ke({props:{resources:e[7],makeBookmarkResource:e[3],makeUnbookmarkResource:e[4],bookmarkedResourceIdSet:e[2]}}),{c(){t=k("h3"),t.textContent="Toutes les Ressources",r=w(),H(n.$$.fragment),s=w(),i=k("h4"),o=b(h),a=b(" Ressources trouvées"),c=w(),H(u.$$.fragment),R(t,"class","svelte-1tw6m8f"),R(i,"class","svelte-1tw6m8f")},m(e,h){g(e,t,h),g(e,r,h),J(n,e,h),g(e,s,h),g(e,i,h),m(i,o),m(i,a),g(e,c,h),J(u,e,h),l=!0},p(e,t){const r={};1&t&&(r.étapes=e[0]),2&t&&(r.thématiques=e[1]),64&t&&(r.filters=e[6]),n.$set(r),(!l||128&t)&&h!==(h=e[7].length+"")&&x(o,h);const s={};128&t&&(s.resources=e[7]),8&t&&(s.makeBookmarkResource=e[3]),16&t&&(s.makeUnbookmarkResource=e[4]),4&t&&(s.bookmarkedResourceIdSet=e[2]),u.$set(s)},i(e){l||(M(n.$$.fragment,e),M(u.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),W(u.$$.fragment,e),l=!1},d(e){e&&v(t),e&&v(r),G(n,e),e&&v(s),e&&v(i),e&&v(c),G(u,e)}}}function Le(e){let t,r;return t=new Ce({props:{listeRessourceURL:e[5],$$slots:{"colonne-du-centre":[Ee]},$$scope:{ctx:e}}}),{c(){H(t.$$.fragment)},m(e,n){J(t,e,n),r=!0},p(e,[r]){const n={};32&r&&(n.listeRessourceURL=e[5]),4319&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(M(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function Te(e,t,r){let{allEtapes:n}=t,{"allThématiques":s}=t,{allResources:i}=t,{bookmarkedResourceIdSet:o}=t,{makeBookmarkResource:a}=t,{makeUnbookmarkResource:c}=t,{listeRessourceURL:u}=t,l={"étapes":new Set,"thématiques":new Set},h={"étapes":new Set(n),"thématiques":new Set(s)},f=[];return e.$$set=e=>{"allEtapes"in e&&r(0,n=e.allEtapes),"allThématiques"in e&&r(1,s=e.allThématiques),"allResources"in e&&r(10,i=e.allResources),"bookmarkedResourceIdSet"in e&&r(2,o=e.bookmarkedResourceIdSet),"makeBookmarkResource"in e&&r(3,a=e.makeBookmarkResource),"makeUnbookmarkResource"in e&&r(4,c=e.makeUnbookmarkResource),"listeRessourceURL"in e&&r(5,u=e.listeRessourceURL)},e.$$.update=()=>{if(3139&e.$$.dirty){r(6,h={"étapes":new Set(n),"thématiques":new Set(s)});for(const e of l.étapes)h.étapes.delete(e);for(const e of l.thématiques)h.thématiques.delete(e);r(7,f=Se(i,h))}},[n,s,o,a,c,u,h,f,function(e){console.log("étape dans filterChange: ",e),l.étapes.has(e)?l.étapes.delete(e):l.étapes.add(e),r(11,l=l)},function(e){l.thématiques.has(e)?l.thématiques.delete(e):l.thématiques.add(e),r(11,l=l)},i,l]}class Pe extends Z{constructor(e){super(),K(this,e,Te,Le,h,{allEtapes:0,"allThématiques":1,allResources:10,bookmarkedResourceIdSet:2,makeBookmarkResource:3,makeUnbookmarkResource:4,listeRessourceURL:5})}}function Qe(e,t,r){const n=e.slice();return n[5]=t[r],n}function qe(e){let t,r,n,s,i;return s=new ke({props:{resources:e[0]||[],makeUnbookmarkResource:e[1],bookmarkedResourceIdSet:e[4]}}),{c(){t=k("section"),r=k("h3"),r.textContent="Mes ressources",n=w(),H(s.$$.fragment),R(r,"class","svelte-1fwnk7a"),R(t,"class","bookmarks")},m(e,o){g(e,t,o),m(t,r),m(t,n),J(s,t,null),i=!0},p(e,t){const r={};1&t&&(r.resources=e[0]||[]),2&t&&(r.makeUnbookmarkResource=e[1]),16&t&&(r.bookmarkedResourceIdSet=e[4]),s.$set(r)},i(e){i||(M(s.$$.fragment,e),i=!0)},o(e){W(s.$$.fragment,e),i=!1},d(e){e&&v(t),G(s)}}}function Ie(e){let t,r,n,s,i,o=e[3],a=[];for(let t=0;t<o.length;t+=1)a[t]=Fe(Qe(e,o,t));const c=e=>W(a[e],1,1,()=>{a[e]=null});return{c(){t=k("section"),r=k("h4"),r.textContent="Ressources conseillées",n=w(),s=k("ul");for(let e=0;e<a.length;e+=1)a[e].c();R(r,"class","svelte-1fwnk7a"),R(s,"class","svelte-1fwnk7a"),R(t,"class","recommendations svelte-1fwnk7a")},m(e,o){g(e,t,o),m(t,r),m(t,n),m(t,s);for(let e=0;e<a.length;e+=1)a[e].m(s,null);i=!0},p(e,t){if(28&t){let r;for(o=e[3],r=0;r<o.length;r+=1){const n=Qe(e,o,r);a[r]?(a[r].p(n,t),M(a[r],1)):(a[r]=Fe(n),a[r].c(),M(a[r],1),a[r].m(s,null))}for(D(),r=o.length;r<a.length;r+=1)c(r);V()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)M(a[e]);i=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)W(a[e]);i=!1},d(e){e&&v(t),y(a,e)}}}function Fe(e){let t,r,n,s,i,o,a,c,u,l,h=e[5].message+"";return r=new fe({props:{resource:e[5].resource,bookmarkResource:e[2]&&!e[4].has(e[5].resource.id)&&e[2](e[5].resource.id)}}),{c(){t=k("li"),H(r.$$.fragment),n=w(),s=k("div"),i=k("span"),i.textContent="Urbanvitaliz vous conseille cette ressource car :",o=w(),a=k("p"),c=b(h),u=w(),R(i,"class","svelte-1fwnk7a"),R(s,"class","message-bulle svelte-1fwnk7a"),R(t,"class","svelte-1fwnk7a")},m(e,h){g(e,t,h),J(r,t,null),m(t,n),m(t,s),m(s,i),m(s,o),m(s,a),m(a,c),m(t,u),l=!0},p(e,t){const n={};8&t&&(n.resource=e[5].resource),28&t&&(n.bookmarkResource=e[2]&&!e[4].has(e[5].resource.id)&&e[2](e[5].resource.id)),r.$set(n),(!l||8&t)&&h!==(h=e[5].message+"")&&x(c,h)},i(e){l||(M(r.$$.fragment,e),l=!0)},o(e){W(r.$$.fragment,e),l=!1},d(e){e&&v(t),G(r)}}}function Oe(e){let t,r,n=e[3]&&Ie(e);return{c(){n&&n.c(),t=b("")},m(e,s){n&&n.m(e,s),g(e,t,s),r=!0},p(e,r){e[3]?n?(n.p(e,r),8&r&&M(n,1)):(n=Ie(e),n.c(),M(n,1),n.m(t.parentNode,t)):n&&(D(),W(n,1,1,()=>{n=null}),V())},i(e){r||(M(n),r=!0)},o(e){W(n),r=!1},d(e){n&&n.d(e),e&&v(t)}}}function Ue(e){let t,r;return t=new Ce({props:{$$slots:{"colonne-de-droite":[Oe],"colonne-du-centre":[qe]},$$scope:{ctx:e}}}),{c(){H(t.$$.fragment)},m(e,n){J(t,e,n),r=!0},p(e,[r]){const n={};287&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(M(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function je(e,t,r){let n,{bookmarkedResources:s=[]}=t,{makeUnbookmarkResource:i}=t,{makeBookmarkResource:o}=t,{recommendations:a}=t;return e.$$set=e=>{"bookmarkedResources"in e&&r(0,s=e.bookmarkedResources),"makeUnbookmarkResource"in e&&r(1,i=e.makeUnbookmarkResource),"makeBookmarkResource"in e&&r(2,o=e.makeBookmarkResource),"recommendations"in e&&r(3,a=e.recommendations)},e.$$.update=()=>{1&e.$$.dirty&&r(4,n=new Set((s||[]).map(e=>e.id)))},[s,i,o,a,n]}class Ae extends Z{constructor(e){super(),K(this,e,je,Ue,h,{bookmarkedResources:0,makeUnbookmarkResource:1,makeBookmarkResource:2,recommendations:3})}}function Ne(e){let t;return{c(){t=k("p"),t.textContent="(aucune ressource pertinente pour le moment)"},m(e,r){g(e,t,r)},p:o,i:o,o:o,d(e){e&&v(t)}}}function ze(e){let t,r;return t=new ke({props:{resources:e[11],makeBookmarkResource:e[7],makeUnbookmarkResource:e[8],bookmarkedResourceIdSet:e[9]}}),{c(){H(t.$$.fragment)},m(e,n){J(t,e,n),r=!0},p(e,r){const n={};2048&r&&(n.resources=e[11]),128&r&&(n.makeBookmarkResource=e[7]),256&r&&(n.makeUnbookmarkResource=e[8]),512&r&&(n.bookmarkedResourceIdSet=e[9]),t.$set(n)},i(e){r||(M(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function Be(e){let t,r,n,s,i,o,a,c,u,l,h,f,d,p,y,C,S,E,L,T=e[11].length+"";c=new ie({props:{"étapes":e[1],"thématiques":e[2],filters:e[4],"étapeFilterChange":e[5],"thématiqueFilterChange":e[6]}});const P=[ze,Ne],Q=[];function q(e,t){return e[11].length>=1?0:1}return y=q(e),C=Q[y]=P[y](e),{c(){t=k("section"),r=k("h3"),r.textContent="Rechercher une ressource",n=w(),s=k("p"),s.textContent="Saisissez des mots-clefs ou des expressions pour décrire votre friche, votre projet, vos difficultés :",i=w(),o=k("textarea"),a=w(),H(c.$$.fragment),u=w(),l=k("section"),h=k("h4"),f=b(T),d=b(" Ressources correspondantes"),p=w(),C.c(),R(r,"class","svelte-jxf7hj"),R(s,"class","svelte-jxf7hj"),R(o,"class","rf-input svelte-jxf7hj"),R(t,"class","filtre-resources svelte-jxf7hj")},m(v,k){g(v,t,k),m(t,r),m(t,n),m(t,s),m(t,i),m(t,o),$(o,e[10]),m(t,a),J(c,t,null),g(v,u,k),g(v,l,k),m(l,h),m(h,f),m(h,d),m(l,p),Q[y].m(l,null),S=!0,E||(L=_(o,"input",e[13]),E=!0)},p(e,t){1024&t&&$(o,e[10]);const r={};2&t&&(r.étapes=e[1]),4&t&&(r.thématiques=e[2]),16&t&&(r.filters=e[4]),32&t&&(r.étapeFilterChange=e[5]),64&t&&(r.thématiqueFilterChange=e[6]),c.$set(r),(!S||2048&t)&&T!==(T=e[11].length+"")&&x(f,T);let n=y;y=q(e),y===n?Q[y].p(e,t):(D(),W(Q[n],1,1,()=>{Q[n]=null}),V(),C=Q[y],C?C.p(e,t):(C=Q[y]=P[y](e),C.c()),M(C,1),C.m(l,null))},i(e){S||(M(c.$$.fragment,e),M(C),S=!0)},o(e){W(c.$$.fragment,e),W(C),S=!1},d(e){e&&v(t),G(c),e&&v(u),e&&v(l),Q[y].d(),E=!1,L()}}}function De(e){let t,r,n,s,i,o,a,c=e[11].length+"",u=e[3].length+"";return{c(){t=k("section"),r=k("h1"),n=b(c),s=w(),i=k("p"),o=b("Ressources pertinentes sur "),a=b(u),R(r,"class","svelte-jxf7hj"),R(i,"class","svelte-jxf7hj"),R(t,"class","recherche-result-count svelte-jxf7hj")},m(e,c){g(e,t,c),m(t,r),m(r,n),m(t,s),m(t,i),m(i,o),m(i,a)},p(e,t){2048&t&&c!==(c=e[11].length+"")&&x(n,c),8&t&&u!==(u=e[3].length+"")&&x(a,u)},d(e){e&&v(t)}}}function Ve(e){let t,r;return t=new Ce({props:{listeRessourceURL:e[0],$$slots:{"colonne-de-droite":[De],"colonne-du-centre":[Be]},$$scope:{ctx:e}}}),{c(){H(t.$$.fragment)},m(e,n){J(t,e,n),r=!0},p(e,[r]){const n={};1&r&&(n.listeRessourceURL=e[0]),20478&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(M(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function Me(e,t,r){let n,{listeRessourceURL:s}=t,{"étapes":i}=t,{"thématiques":o}=t,{allResources:a=[]}=t,{filters:c}=t,{"étapeFilterChange":u}=t,{"thématiqueFilterChange":l}=t,{makeBookmarkResource:h}=t,{makeUnbookmarkResource:f}=t,{bookmarkedResourceIdSet:d}=t,{findRelevantRessources:p=(()=>{})}=t,m="";return e.$$set=e=>{"listeRessourceURL"in e&&r(0,s=e.listeRessourceURL),"étapes"in e&&r(1,i=e.étapes),"thématiques"in e&&r(2,o=e.thématiques),"allResources"in e&&r(3,a=e.allResources),"filters"in e&&r(4,c=e.filters),"étapeFilterChange"in e&&r(5,u=e.étapeFilterChange),"thématiqueFilterChange"in e&&r(6,l=e.thématiqueFilterChange),"makeBookmarkResource"in e&&r(7,h=e.makeBookmarkResource),"makeUnbookmarkResource"in e&&r(8,f=e.makeUnbookmarkResource),"bookmarkedResourceIdSet"in e&&r(9,d=e.bookmarkedResourceIdSet),"findRelevantRessources"in e&&r(12,p=e.findRelevantRessources)},e.$$.update=()=>{5120&e.$$.dirty&&r(11,n=p(m)||[])},[s,i,o,a,c,u,l,h,f,d,m,n,p,function(){m=this.value,r(10,m)}]}class We extends Z{constructor(e){super(),K(this,e,Me,Ve,h,{listeRessourceURL:0,"étapes":1,"thématiques":2,allResources:3,filters:4,"étapeFilterChange":5,"thématiqueFilterChange":6,makeBookmarkResource:7,makeUnbookmarkResource:8,bookmarkedResourceIdSet:9,findRelevantRessources:12})}}function He(e,t,r){const n=e.slice();return n[13]=t[r],n}function Je(e,t,r){const n=e.slice();return n[16]=t[r],n}function Ge(e){let t,r;return{c(){t=k("option"),t.__value=r=e[16],t.value=t.__value},m(e,r){g(e,t,r)},p(e,n){16&n&&r!==(r=e[16])&&(t.__value=r,t.value=t.__value)},d(e){e&&v(t)}}}function Ye(e){let t,r=e[0],n=[];for(let t=0;t<r.length;t+=1)n[t]=Ke(He(e,r,t));return{c(){t=k("datalist");for(let e=0;e<n.length;e+=1)n[e].c();R(t,"id","listeRessources")},m(e,r){g(e,t,r);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,s){if(1&s){let i;for(r=e[0],i=0;i<r.length;i+=1){const o=He(e,r,i);n[i]?n[i].p(o,s):(n[i]=Ke(o),n[i].c(),n[i].m(t,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=r.length}},d(e){e&&v(t),y(n,e)}}}function Ke(e){let t,r;return{c(){t=k("option"),t.__value=r=e[13].phrase_catch,t.value=t.__value},m(e,r){g(e,t,r)},p(e,n){1&n&&r!==(r=e[13].phrase_catch)&&(t.__value=r,t.value=t.__value)},d(e){e&&v(t)}}}function Ze(e){let t,r,n,s,i,a,c,l,h,f,d,p,b,x,C,S,E,L,T,P,Q,q,I,F,O=e[4],U=[];for(let t=0;t<O.length;t+=1)U[t]=Ge(Je(e,O,t));let j=e[0]&&Ye(e);return{c(){t=k("form"),r=k("h1"),r.textContent="Envoi de recommandation",n=w(),s=k("section"),i=k("h2"),i.textContent="À quelle collectivité ?",a=w(),c=k("input"),l=w(),h=k("datalist");for(let e=0;e<U.length;e+=1)U[e].c();f=w(),d=k("section"),p=k("h2"),p.textContent="Recommander quelle ressource ?",b=w(),x=k("input"),C=w(),j&&j.c(),S=w(),E=k("section"),L=k("h2"),L.textContent="Commentaire de l'équipe Urban Vitaliz",T=w(),P=k("textarea"),Q=w(),q=k("button"),q.textContent="Envoyer",R(c,"list","emails"),R(h,"id","emails"),R(x,"list","listeRessources"),R(P,"class","rf-input"),R(q,"class","rf-btn"),R(q,"type","submit")},m(o,u){g(o,t,u),m(t,r),m(t,n),m(t,s),m(s,i),m(s,a),m(s,c),$(c,e[2]),m(s,l),m(s,h);for(let e=0;e<U.length;e+=1)U[e].m(h,null);m(t,f),m(t,d),m(d,p),m(d,b),m(d,x),$(x,e[3]),m(d,C),j&&j.m(d,null),m(t,S),m(t,E),m(E,L),m(E,T),m(E,P),$(P,e[7]),m(t,Q),m(t,q),I||(F=[_(c,"input",e[9]),_(x,"input",e[10]),_(P,"input",e[11]),_(t,"submit",e[12])],I=!0)},p(e,[t]){if(4&t&&c.value!==e[2]&&$(c,e[2]),16&t){let r;for(O=e[4],r=0;r<O.length;r+=1){const n=Je(e,O,r);U[r]?U[r].p(n,t):(U[r]=Ge(n),U[r].c(),U[r].m(h,null))}for(;r<U.length;r+=1)U[r].d(1);U.length=O.length}8&t&&x.value!==e[3]&&$(x,e[3]),e[0]?j?j.p(e,t):(j=Ye(e),j.c(),j.m(d,null)):j&&(j.d(1),j=null),128&t&&$(P,e[7])},i:o,o:o,d(e){e&&v(t),y(U,e),j&&j.d(),I=!1,u(F)}}}function Xe(e,t,r){let n,{persons:s}=t,{ressources:i}=t,o="",a=void 0,c="",u=void 0,l="",{sendRecommandation:h}=t;return e.$$set=e=>{"persons"in e&&r(8,s=e.persons),"ressources"in e&&r(0,i=e.ressources),"sendRecommandation"in e&&r(1,h=e.sendRecommandation)},e.$$.update=()=>{256&e.$$.dirty&&r(4,n=s.map(e=>e.emails).flat()),260&e.$$.dirty&&r(5,a=s.find(e=>e.emails.includes(o))),9&e.$$.dirty&&r(6,u=i&&i.find(e=>e.phrase_catch===c))},[i,h,o,c,n,a,u,l,s,function(){o=this.value,r(2,o)},function(){c=this.value,r(3,c)},function(){l=this.value,r(7,l)},e=>{e.preventDefault(),h(a,u,l)}]}class et extends Z{constructor(e){super(),K(this,e,Xe,Ze,h,{persons:8,ressources:0,sendRecommandation:1})}}function tt(e){let t,r,n,s=e[1].sous_titre+"";return{c(){t=k("p"),r=k("em"),n=b(s)},m(e,s){g(e,t,s),m(t,r),m(r,n)},p(e,t){2&t&&s!==(s=e[1].sous_titre+"")&&x(n,s)},d(e){e&&v(t)}}}function rt(e){let t,r,n,s,i,o,a=e[1].phrase_catch+"",c=e[1].output+"",u=void 0!==e[1].sous_titre&&tt(e);return{c(){t=k("div"),r=k("h1"),n=b(a),s=w(),u&&u.c(),i=w(),R(r,"class","svelte-ne0c5t"),o=new C(null),R(t,"class","markdown-container svelte-ne0c5t")},m(e,a){g(e,t,a),m(t,r),m(r,n),m(t,s),u&&u.m(t,null),m(t,i),o.m(c,t)},p(e,r){2&r&&a!==(a=e[1].phrase_catch+"")&&x(n,a),void 0!==e[1].sous_titre?u?u.p(e,r):(u=tt(e),u.c(),u.m(t,i)):u&&(u.d(1),u=null),2&r&&c!==(c=e[1].output+"")&&o.p(c)},d(e){e&&v(t),u&&u.d()}}}function nt(e){let t,r,n;return{c(){t=k("button"),t.textContent="🌟 Supprimer",R(t,"class","rf-btn rf-btn--secondary")},m(s,i){g(s,t,i),r||(n=_(t,"click",(function(){l(e[3])&&e[3].apply(this,arguments)})),r=!0)},p(t,r){e=t},d(e){e&&v(t),r=!1,n()}}}function st(e){let t,r,n;return{c(){t=k("button"),t.textContent="☆ Enregistrer",R(t,"class","rf-btn rf-btn--secondary")},m(s,i){g(s,t,i),r||(n=_(t,"click",(function(){l(e[2])&&e[2].apply(this,arguments)})),r=!0)},p(t,r){e=t},d(e){e&&v(t),r=!1,n()}}}function it(e){let t,r,n,s,i,o,a,c,u,l,h,f,d,p,y,b,_,x,$,C,S,E,L="function"==typeof e[3]&&nt(e),T="function"==typeof e[2]&&st(e);return{c(){t=k("section"),L&&L.c(),r=w(),T&&T.c(),n=w(),s=k("h4"),s.textContent="Êtes-vous satisfait de cette page ?",i=w(),o=k("section"),a=k("img"),u=w(),l=k("img"),f=w(),d=k("img"),y=w(),b=k("img"),x=w(),$=k("img"),S=w(),E=k("button"),E.textContent="Faire une suggestion",R(s,"class","svelte-ne0c5t"),a.src!==(c=oe+"/assets/images/smiley-sad-1-alternate.svg")&&R(a,"src",c),R(a,"alt","personne très triste"),R(a,"class","svelte-ne0c5t"),l.src!==(h=oe+"/assets/images/smiley-unhappy-1-alternate.svg")&&R(l,"src",h),R(l,"alt","personne triste"),R(l,"class","svelte-ne0c5t"),d.src!==(p=oe+"/assets/images/smiley-indiferent-1-alternate.svg")&&R(d,"src",p),R(d,"alt","personne neutre"),R(d,"class","svelte-ne0c5t"),b.src!==(_=oe+"/assets/images/smiley-smirk-alternate.svg")&&R(b,"src",_),R(b,"alt","personne heureuse"),R(b,"class","svelte-ne0c5t"),$.src!==(C=oe+"/assets/images/smiley-smile-1-alternate-1.svg")&&R($,"src",C),R($,"alt","personne très heureuse"),R($,"class","svelte-ne0c5t"),R(o,"class","smiley svelte-ne0c5t"),R(E,"class","rf-btn rf-btn--secondary"),R(t,"class","ressource-side svelte-ne0c5t")},m(e,c){g(e,t,c),L&&L.m(t,null),m(t,r),T&&T.m(t,null),m(t,n),m(t,s),m(t,i),m(t,o),m(o,a),m(o,u),m(o,l),m(o,f),m(o,d),m(o,y),m(o,b),m(o,x),m(o,$),m(t,S),m(t,E)},p(e,s){"function"==typeof e[3]?L?L.p(e,s):(L=nt(e),L.c(),L.m(t,r)):L&&(L.d(1),L=null),"function"==typeof e[2]?T?T.p(e,s):(T=st(e),T.c(),T.m(t,n)):T&&(T.d(1),T=null)},d(e){e&&v(t),L&&L.d(),T&&T.d()}}}function ot(e){let t,r;return t=new Ce({props:{listeRessourceURL:e[0],$$slots:{"colonne-de-droite":[it],"colonne-du-centre":[rt]},$$scope:{ctx:e}}}),{c(){H(t.$$.fragment)},m(e,n){J(t,e,n),r=!0},p(e,[r]){const n={};1&r&&(n.listeRessourceURL=e[0]),30&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(M(t.$$.fragment,e),r=!0)},o(e){W(t.$$.fragment,e),r=!1},d(e){G(t,e)}}}function at(e,t,r){let{listeRessourceURL:n}=t,{ressource:s={}}=t,{bookmarkResource:i}=t,{unbookmarkResource:o}=t;return e.$$set=e=>{"listeRessourceURL"in e&&r(0,n=e.listeRessourceURL),"ressource"in e&&r(1,s=e.ressource),"bookmarkResource"in e&&r(2,i=e.bookmarkResource),"unbookmarkResource"in e&&r(3,o=e.unbookmarkResource)},[n,s,i,o]}class ct extends Z{constructor(e){super(),K(this,e,at,ot,h,{listeRessourceURL:0,ressource:1,bookmarkResource:2,unbookmarkResource:3})}}const ut="betagouv.github.io"===location.hostname?"https://app-20420772-6ed7-40ca-978c-f360edf8941c.cleverapps.io":"http://localhost:4999";function lt(e){let{etape:t,thematique:r}=e;return e.etape=function(e){"string"==typeof e&&(e=[e]);return Array.isArray(e)?e.map(e=>{e=e.trim();const t="1 - ".length;return e=e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1)}):[]}(t),e.thematique=function(e){"string"==typeof e&&(e=[e]);return Array.isArray(e)?e.map(e=>(e=e.trim()).charAt(0).toUpperCase()+e.slice(1)):[]}(r),e}function ht(e){const{edit_capability:t}=e,r=new URL(t);return`${oe}/liste-ressources?secret=${r.searchParams.get("secret")}`}console.log("API server origin:",ut);
/**
   * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9
   * Copyright (C) 2020 Oliver Nightingale
   * @license MIT
   */
var ft=s((function(e,t){!function(){var t,r,n,s,i,o,a,c,u,l,h,f,d,p,m,g,v,y,k,b,w,_,R,x,$,C=function(e){var t=new C.Builder;return t.pipeline.add(C.trimmer,C.stopWordFilter,C.stemmer),t.searchPipeline.add(C.stemmer),e.call(t,t),t.build()};C.version="2.3.9",
/*!
   * lunr.utils
   * Copyright (C) 2020 Oliver Nightingale
   */
C.utils={},C.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),C.utils.asString=function(e){return null==e?"":e.toString()},C.utils.clone=function(e){if(null==e)return e;for(var t=Object.create(null),r=Object.keys(e),n=0;n<r.length;n++){var s=r[n],i=e[s];if(Array.isArray(i))t[s]=i.slice();else{if("string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i)throw new TypeError("clone is not deep and does not support nested objects");t[s]=i}}return t},C.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},C.FieldRef.joiner="/",C.FieldRef.fromString=function(e){var t=e.indexOf(C.FieldRef.joiner);if(-1===t)throw"malformed field ref string";var r=e.slice(0,t),n=e.slice(t+1);return new C.FieldRef(n,r,e)},C.FieldRef.prototype.toString=function(){return null==this._stringValue&&(this._stringValue=this.fieldName+C.FieldRef.joiner+this.docRef),this._stringValue},
/*!
   * lunr.Set
   * Copyright (C) 2020 Oliver Nightingale
   */
C.Set=function(e){if(this.elements=Object.create(null),e){this.length=e.length;for(var t=0;t<this.length;t++)this.elements[e[t]]=!0}else this.length=0},C.Set.complete={intersect:function(e){return e},union:function(){return this},contains:function(){return!0}},C.Set.empty={intersect:function(){return this},union:function(e){return e},contains:function(){return!1}},C.Set.prototype.contains=function(e){return!!this.elements[e]},C.Set.prototype.intersect=function(e){var t,r,n,s=[];if(e===C.Set.complete)return this;if(e===C.Set.empty)return e;this.length<e.length?(t=this,r=e):(t=e,r=this),n=Object.keys(t.elements);for(var i=0;i<n.length;i++){var o=n[i];o in r.elements&&s.push(o)}return new C.Set(s)},C.Set.prototype.union=function(e){return e===C.Set.complete?C.Set.complete:e===C.Set.empty?this:new C.Set(Object.keys(this.elements).concat(Object.keys(e.elements)))},C.idf=function(e,t){var r=0;for(var n in e)"_index"!=n&&(r+=Object.keys(e[n]).length);var s=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(s))},C.Token=function(e,t){this.str=e||"",this.metadata=t||{}},C.Token.prototype.toString=function(){return this.str},C.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},C.Token.prototype.clone=function(e){return e=e||function(e){return e},new C.Token(e(this.str,this.metadata),this.metadata)},
/*!
   * lunr.tokenizer
   * Copyright (C) 2020 Oliver Nightingale
   */
C.tokenizer=function(e,t){if(null==e||null==e)return[];if(Array.isArray(e))return e.map((function(e){return new C.Token(C.utils.asString(e).toLowerCase(),C.utils.clone(t))}));for(var r=e.toString().toLowerCase(),n=r.length,s=[],i=0,o=0;i<=n;i++){var a=i-o;if(r.charAt(i).match(C.tokenizer.separator)||i==n){if(a>0){var c=C.utils.clone(t)||{};c.position=[o,a],c.index=s.length,s.push(new C.Token(r.slice(o,i),c))}o=i+1}}return s},C.tokenizer.separator=/[\s\-]+/,
/*!
   * lunr.Pipeline
   * Copyright (C) 2020 Oliver Nightingale
   */
C.Pipeline=function(){this._stack=[]},C.Pipeline.registeredFunctions=Object.create(null),C.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&C.utils.warn("Overwriting existing registered function: "+t),e.label=t,C.Pipeline.registeredFunctions[e.label]=e},C.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||C.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},C.Pipeline.load=function(e){var t=new C.Pipeline;return e.forEach((function(e){var r=C.Pipeline.registeredFunctions[e];if(!r)throw new Error("Cannot load unregistered function: "+e);t.add(r)})),t},C.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach((function(e){C.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)}),this)},C.Pipeline.prototype.after=function(e,t){C.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");r+=1,this._stack.splice(r,0,t)},C.Pipeline.prototype.before=function(e,t){C.Pipeline.warnIfFunctionNotRegistered(t);var r=this._stack.indexOf(e);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r,0,t)},C.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},C.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=0;r<t;r++){for(var n=this._stack[r],s=[],i=0;i<e.length;i++){var o=n(e[i],i,e);if(null!=o&&""!==o)if(Array.isArray(o))for(var a=0;a<o.length;a++)s.push(o[a]);else s.push(o)}e=s}return e},C.Pipeline.prototype.runString=function(e,t){var r=new C.Token(e,t);return this.run([r]).map((function(e){return e.toString()}))},C.Pipeline.prototype.reset=function(){this._stack=[]},C.Pipeline.prototype.toJSON=function(){return this._stack.map((function(e){return C.Pipeline.warnIfFunctionNotRegistered(e),e.label}))},
/*!
   * lunr.Vector
   * Copyright (C) 2020 Oliver Nightingale
   */
C.Vector=function(e){this._magnitude=0,this.elements=e||[]},C.Vector.prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,r=this.elements.length/2,n=r-t,s=Math.floor(n/2),i=this.elements[2*s];n>1&&(i<e&&(t=s),i>e&&(r=s),i!=e);)n=r-t,s=t+Math.floor(n/2),i=this.elements[2*s];return i==e||i>e?2*s:i<e?2*(s+1):void 0},C.Vector.prototype.insert=function(e,t){this.upsert(e,t,(function(){throw"duplicate index"}))},C.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var n=this.positionForIndex(e);this.elements[n]==e?this.elements[n+1]=r(this.elements[n+1],t):this.elements.splice(n,0,e,t)},C.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var n=this.elements[r];e+=n*n}return this._magnitude=Math.sqrt(e)},C.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,n=e.elements,s=r.length,i=n.length,o=0,a=0,c=0,u=0;c<s&&u<i;)(o=r[c])<(a=n[u])?c+=2:o>a?u+=2:o==a&&(t+=r[c+1]*n[u+1],c+=2,u+=2);return t},C.Vector.prototype.similarity=function(e){return this.dot(e)/this.magnitude()||0},C.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},C.Vector.prototype.toJSON=function(){return this.elements},
/*!
   * lunr.stemmer
   * Copyright (C) 2020 Oliver Nightingale
   * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
   */
C.stemmer=(t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},r={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[aeiouy]",s="[^aeiou][^aeiouy]*",i=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),o=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),a=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),c=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),u=/^(.+?)(ss|i)es$/,l=/^(.+?)([^s])s$/,h=/^(.+?)eed$/,f=/^(.+?)(ed|ing)$/,d=/.$/,p=/(at|bl|iz)$/,m=new RegExp("([^aeiouylsz])\\1$"),g=new RegExp("^"+s+n+"[^aeiouwxy]$"),v=/^(.+?[^aeiou])y$/,y=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,k=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,b=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,w=/^(.+?)(s|t)(ion)$/,_=/^(.+?)e$/,R=/ll$/,x=new RegExp("^"+s+n+"[^aeiouwxy]$"),$=function(e){var n,s,$,C,S,E,L;if(e.length<3)return e;if("y"==($=e.substr(0,1))&&(e=$.toUpperCase()+e.substr(1)),S=l,(C=u).test(e)?e=e.replace(C,"$1$2"):S.test(e)&&(e=e.replace(S,"$1$2")),S=f,(C=h).test(e)){var T=C.exec(e);(C=i).test(T[1])&&(C=d,e=e.replace(C,""))}else S.test(e)&&(n=(T=S.exec(e))[1],(S=c).test(n)&&(E=m,L=g,(S=p).test(e=n)?e+="e":E.test(e)?(C=d,e=e.replace(C,"")):L.test(e)&&(e+="e")));return(C=v).test(e)&&(e=(n=(T=C.exec(e))[1])+"i"),(C=y).test(e)&&(n=(T=C.exec(e))[1],s=T[2],(C=i).test(n)&&(e=n+t[s])),(C=k).test(e)&&(n=(T=C.exec(e))[1],s=T[2],(C=i).test(n)&&(e=n+r[s])),S=w,(C=b).test(e)?(n=(T=C.exec(e))[1],(C=o).test(n)&&(e=n)):S.test(e)&&(n=(T=S.exec(e))[1]+T[2],(S=o).test(n)&&(e=n)),(C=_).test(e)&&(n=(T=C.exec(e))[1],S=a,E=x,((C=o).test(n)||S.test(n)&&!E.test(n))&&(e=n)),S=o,(C=R).test(e)&&S.test(e)&&(C=d,e=e.replace(C,"")),"y"==$&&(e=$.toLowerCase()+e.substr(1)),e},function(e){return e.update($)}),C.Pipeline.registerFunction(C.stemmer,"stemmer"),
/*!
   * lunr.stopWordFilter
   * Copyright (C) 2020 Oliver Nightingale
   */
C.generateStopWordFilter=function(e){var t=e.reduce((function(e,t){return e[t]=t,e}),{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},C.stopWordFilter=C.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),C.Pipeline.registerFunction(C.stopWordFilter,"stopWordFilter"),
/*!
   * lunr.trimmer
   * Copyright (C) 2020 Oliver Nightingale
   */
C.trimmer=function(e){return e.update((function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")}))},C.Pipeline.registerFunction(C.trimmer,"trimmer"),
/*!
   * lunr.TokenSet
   * Copyright (C) 2020 Oliver Nightingale
   */
C.TokenSet=function(){this.final=!1,this.edges={},this.id=C.TokenSet._nextId,C.TokenSet._nextId+=1},C.TokenSet._nextId=1,C.TokenSet.fromArray=function(e){for(var t=new C.TokenSet.Builder,r=0,n=e.length;r<n;r++)t.insert(e[r]);return t.finish(),t.root},C.TokenSet.fromClause=function(e){return"editDistance"in e?C.TokenSet.fromFuzzyString(e.term,e.editDistance):C.TokenSet.fromString(e.term)},C.TokenSet.fromFuzzyString=function(e,t){for(var r=new C.TokenSet,n=[{node:r,editsRemaining:t,str:e}];n.length;){var s=n.pop();if(s.str.length>0){var i,o=s.str.charAt(0);o in s.node.edges?i=s.node.edges[o]:(i=new C.TokenSet,s.node.edges[o]=i),1==s.str.length&&(i.final=!0),n.push({node:i,editsRemaining:s.editsRemaining,str:s.str.slice(1)})}if(0!=s.editsRemaining){if("*"in s.node.edges)var a=s.node.edges["*"];else{a=new C.TokenSet;s.node.edges["*"]=a}if(0==s.str.length&&(a.final=!0),n.push({node:a,editsRemaining:s.editsRemaining-1,str:s.str}),s.str.length>1&&n.push({node:s.node,editsRemaining:s.editsRemaining-1,str:s.str.slice(1)}),1==s.str.length&&(s.node.final=!0),s.str.length>=1){if("*"in s.node.edges)var c=s.node.edges["*"];else{c=new C.TokenSet;s.node.edges["*"]=c}1==s.str.length&&(c.final=!0),n.push({node:c,editsRemaining:s.editsRemaining-1,str:s.str.slice(1)})}if(s.str.length>1){var u,l=s.str.charAt(0),h=s.str.charAt(1);h in s.node.edges?u=s.node.edges[h]:(u=new C.TokenSet,s.node.edges[h]=u),1==s.str.length&&(u.final=!0),n.push({node:u,editsRemaining:s.editsRemaining-1,str:l+s.str.slice(2)})}}}return r},C.TokenSet.fromString=function(e){for(var t=new C.TokenSet,r=t,n=0,s=e.length;n<s;n++){var i=e[n],o=n==s-1;if("*"==i)t.edges[i]=t,t.final=o;else{var a=new C.TokenSet;a.final=o,t.edges[i]=a,t=a}}return r},C.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),n=Object.keys(r.node.edges),s=n.length;r.node.final&&(r.prefix.charAt(0),e.push(r.prefix));for(var i=0;i<s;i++){var o=n[i];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},C.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,n=0;n<r;n++){var s=t[n];e=e+s+this.edges[s].id}return e},C.TokenSet.prototype.intersect=function(e){for(var t=new C.TokenSet,r=void 0,n=[{qNode:e,output:t,node:this}];n.length;){r=n.pop();for(var s=Object.keys(r.qNode.edges),i=s.length,o=Object.keys(r.node.edges),a=o.length,c=0;c<i;c++)for(var u=s[c],l=0;l<a;l++){var h=o[l];if(h==u||"*"==u){var f=r.node.edges[h],d=r.qNode.edges[u],p=f.final&&d.final,m=void 0;h in r.output.edges?(m=r.output.edges[h]).final=m.final||p:((m=new C.TokenSet).final=p,r.output.edges[h]=m),n.push({qNode:d,output:m,node:f})}}}return t},C.TokenSet.Builder=function(){this.previousWord="",this.root=new C.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},C.TokenSet.Builder.prototype.insert=function(e){var t,r=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<e.length&&n<this.previousWord.length&&e[n]==this.previousWord[n];n++)r++;this.minimize(r),t=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(n=r;n<e.length;n++){var s=new C.TokenSet,i=e[n];t.edges[i]=s,this.uncheckedNodes.push({parent:t,char:i,child:s}),t=s}t.final=!0,this.previousWord=e},C.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},C.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],n=r.child.toString();n in this.minimizedNodes?r.parent.edges[r.char]=this.minimizedNodes[n]:(r.child._str=n,this.minimizedNodes[n]=r.child),this.uncheckedNodes.pop()}},
/*!
   * lunr.Index
   * Copyright (C) 2020 Oliver Nightingale
   */
C.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},C.Index.prototype.search=function(e){return this.query((function(t){new C.QueryParser(e,t).parse()}))},C.Index.prototype.query=function(e){for(var t=new C.Query(this.fields),r=Object.create(null),n=Object.create(null),s=Object.create(null),i=Object.create(null),o=Object.create(null),a=0;a<this.fields.length;a++)n[this.fields[a]]=new C.Vector;e.call(t,t);for(a=0;a<t.clauses.length;a++){var c=t.clauses[a],u=null,l=C.Set.empty;u=c.usePipeline?this.pipeline.runString(c.term,{fields:c.fields}):[c.term];for(var h=0;h<u.length;h++){var f=u[h];c.term=f;var d=C.TokenSet.fromClause(c),p=this.tokenSet.intersect(d).toArray();if(0===p.length&&c.presence===C.Query.presence.REQUIRED){for(var m=0;m<c.fields.length;m++){i[Q=c.fields[m]]=C.Set.empty}break}for(var g=0;g<p.length;g++){var v=p[g],y=this.invertedIndex[v],k=y._index;for(m=0;m<c.fields.length;m++){var b=y[Q=c.fields[m]],w=Object.keys(b),_=v+"/"+Q,R=new C.Set(w);if(c.presence==C.Query.presence.REQUIRED&&(l=l.union(R),void 0===i[Q]&&(i[Q]=C.Set.complete)),c.presence!=C.Query.presence.PROHIBITED){if(n[Q].upsert(k,c.boost,(function(e,t){return e+t})),!s[_]){for(var x=0;x<w.length;x++){var $,S=w[x],E=new C.FieldRef(S,Q),L=b[S];void 0===($=r[E])?r[E]=new C.MatchData(v,Q,L):$.add(v,Q,L)}s[_]=!0}}else void 0===o[Q]&&(o[Q]=C.Set.empty),o[Q]=o[Q].union(R)}}}if(c.presence===C.Query.presence.REQUIRED)for(m=0;m<c.fields.length;m++){i[Q=c.fields[m]]=i[Q].intersect(l)}}var T=C.Set.complete,P=C.Set.empty;for(a=0;a<this.fields.length;a++){var Q;i[Q=this.fields[a]]&&(T=T.intersect(i[Q])),o[Q]&&(P=P.union(o[Q]))}var q=Object.keys(r),I=[],F=Object.create(null);if(t.isNegated()){q=Object.keys(this.fieldVectors);for(a=0;a<q.length;a++){E=q[a];var O=C.FieldRef.fromString(E);r[E]=new C.MatchData}}for(a=0;a<q.length;a++){var U=(O=C.FieldRef.fromString(q[a])).docRef;if(T.contains(U)&&!P.contains(U)){var j,A=this.fieldVectors[O],N=n[O.fieldName].similarity(A);if(void 0!==(j=F[U]))j.score+=N,j.matchData.combine(r[O]);else{var z={ref:U,score:N,matchData:r[O]};F[U]=z,I.push(z)}}}return I.sort((function(e,t){return t.score-e.score}))},C.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map((function(e){return[e,this.invertedIndex[e]]}),this),t=Object.keys(this.fieldVectors).map((function(e){return[e,this.fieldVectors[e].toJSON()]}),this);return{version:C.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},C.Index.load=function(e){var t={},r={},n=e.fieldVectors,s=Object.create(null),i=e.invertedIndex,o=new C.TokenSet.Builder,a=C.Pipeline.load(e.pipeline);e.version!=C.version&&C.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+C.version+"' does not match serialized index '"+e.version+"'");for(var c=0;c<n.length;c++){var u=(h=n[c])[0],l=h[1];r[u]=new C.Vector(l)}for(c=0;c<i.length;c++){var h,f=(h=i[c])[0],d=h[1];o.insert(f),s[f]=d}return o.finish(),t.fields=e.fields,t.fieldVectors=r,t.invertedIndex=s,t.tokenSet=o.root,t.pipeline=a,new C.Index(t)},
/*!
   * lunr.Builder
   * Copyright (C) 2020 Oliver Nightingale
   */
C.Builder=function(){this._ref="id",this._fields=Object.create(null),this._documents=Object.create(null),this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=C.tokenizer,this.pipeline=new C.Pipeline,this.searchPipeline=new C.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},C.Builder.prototype.ref=function(e){this._ref=e},C.Builder.prototype.field=function(e,t){if(/\//.test(e))throw new RangeError("Field '"+e+"' contains illegal character '/'");this._fields[e]=t||{}},C.Builder.prototype.b=function(e){this._b=e<0?0:e>1?1:e},C.Builder.prototype.k1=function(e){this._k1=e},C.Builder.prototype.add=function(e,t){var r=e[this._ref],n=Object.keys(this._fields);this._documents[r]=t||{},this.documentCount+=1;for(var s=0;s<n.length;s++){var i=n[s],o=this._fields[i].extractor,a=o?o(e):e[i],c=this.tokenizer(a,{fields:[i]}),u=this.pipeline.run(c),l=new C.FieldRef(r,i),h=Object.create(null);this.fieldTermFrequencies[l]=h,this.fieldLengths[l]=0,this.fieldLengths[l]+=u.length;for(var f=0;f<u.length;f++){var d=u[f];if(null==h[d]&&(h[d]=0),h[d]+=1,null==this.invertedIndex[d]){var p=Object.create(null);p._index=this.termIndex,this.termIndex+=1;for(var m=0;m<n.length;m++)p[n[m]]=Object.create(null);this.invertedIndex[d]=p}null==this.invertedIndex[d][i][r]&&(this.invertedIndex[d][i][r]=Object.create(null));for(var g=0;g<this.metadataWhitelist.length;g++){var v=this.metadataWhitelist[g],y=d.metadata[v];null==this.invertedIndex[d][i][r][v]&&(this.invertedIndex[d][i][r][v]=[]),this.invertedIndex[d][i][r][v].push(y)}}}},C.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,r={},n={},s=0;s<t;s++){var i=C.FieldRef.fromString(e[s]),o=i.fieldName;n[o]||(n[o]=0),n[o]+=1,r[o]||(r[o]=0),r[o]+=this.fieldLengths[i]}var a=Object.keys(this._fields);for(s=0;s<a.length;s++){var c=a[s];r[c]=r[c]/n[c]}this.averageFieldLength=r},C.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),r=t.length,n=Object.create(null),s=0;s<r;s++){for(var i=C.FieldRef.fromString(t[s]),o=i.fieldName,a=this.fieldLengths[i],c=new C.Vector,u=this.fieldTermFrequencies[i],l=Object.keys(u),h=l.length,f=this._fields[o].boost||1,d=this._documents[i.docRef].boost||1,p=0;p<h;p++){var m,g,v,y=l[p],k=u[y],b=this.invertedIndex[y]._index;void 0===n[y]?(m=C.idf(this.invertedIndex[y],this.documentCount),n[y]=m):m=n[y],g=m*((this._k1+1)*k)/(this._k1*(1-this._b+this._b*(a/this.averageFieldLength[o]))+k),g*=f,g*=d,v=Math.round(1e3*g)/1e3,c.insert(b,v)}e[i]=c}this.fieldVectors=e},C.Builder.prototype.createTokenSet=function(){this.tokenSet=C.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},C.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new C.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:Object.keys(this._fields),pipeline:this.searchPipeline})},C.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},C.MatchData=function(e,t,r){for(var n=Object.create(null),s=Object.keys(r||{}),i=0;i<s.length;i++){var o=s[i];n[o]=r[o].slice()}this.metadata=Object.create(null),void 0!==e&&(this.metadata[e]=Object.create(null),this.metadata[e][t]=n)},C.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var n=t[r],s=Object.keys(e.metadata[n]);null==this.metadata[n]&&(this.metadata[n]=Object.create(null));for(var i=0;i<s.length;i++){var o=s[i],a=Object.keys(e.metadata[n][o]);null==this.metadata[n][o]&&(this.metadata[n][o]=Object.create(null));for(var c=0;c<a.length;c++){var u=a[c];null==this.metadata[n][o][u]?this.metadata[n][o][u]=e.metadata[n][o][u]:this.metadata[n][o][u]=this.metadata[n][o][u].concat(e.metadata[n][o][u])}}}},C.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(t in this.metadata[e])for(var n=Object.keys(r),s=0;s<n.length;s++){var i=n[s];i in this.metadata[e][t]?this.metadata[e][t][i]=this.metadata[e][t][i].concat(r[i]):this.metadata[e][t][i]=r[i]}else this.metadata[e][t]=r},C.Query=function(e){this.clauses=[],this.allFields=e},C.Query.wildcard=new String("*"),C.Query.wildcard.NONE=0,C.Query.wildcard.LEADING=1,C.Query.wildcard.TRAILING=2,C.Query.presence={OPTIONAL:1,REQUIRED:2,PROHIBITED:3},C.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=C.Query.wildcard.NONE),e.wildcard&C.Query.wildcard.LEADING&&e.term.charAt(0)!=C.Query.wildcard&&(e.term="*"+e.term),e.wildcard&C.Query.wildcard.TRAILING&&e.term.slice(-1)!=C.Query.wildcard&&(e.term=e.term+"*"),"presence"in e||(e.presence=C.Query.presence.OPTIONAL),this.clauses.push(e),this},C.Query.prototype.isNegated=function(){for(var e=0;e<this.clauses.length;e++)if(this.clauses[e].presence!=C.Query.presence.PROHIBITED)return!1;return!0},C.Query.prototype.term=function(e,t){if(Array.isArray(e))return e.forEach((function(e){this.term(e,C.utils.clone(t))}),this),this;var r=t||{};return r.term=e.toString(),this.clause(r),this},C.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},C.QueryParseError.prototype=new Error,C.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},C.QueryLexer.prototype.run=function(){for(var e=C.QueryLexer.lexText;e;)e=e(this)},C.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,n=0;n<this.escapeCharPositions.length;n++)r=this.escapeCharPositions[n],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},C.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},C.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},C.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return C.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},C.QueryLexer.prototype.width=function(){return this.pos-this.start},C.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},C.QueryLexer.prototype.backup=function(){this.pos-=1},C.QueryLexer.prototype.acceptDigitRun=function(){var e,t;do{t=(e=this.next()).charCodeAt(0)}while(t>47&&t<58);e!=C.QueryLexer.EOS&&this.backup()},C.QueryLexer.prototype.more=function(){return this.pos<this.length},C.QueryLexer.EOS="EOS",C.QueryLexer.FIELD="FIELD",C.QueryLexer.TERM="TERM",C.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",C.QueryLexer.BOOST="BOOST",C.QueryLexer.PRESENCE="PRESENCE",C.QueryLexer.lexField=function(e){return e.backup(),e.emit(C.QueryLexer.FIELD),e.ignore(),C.QueryLexer.lexText},C.QueryLexer.lexTerm=function(e){if(e.width()>1&&(e.backup(),e.emit(C.QueryLexer.TERM)),e.ignore(),e.more())return C.QueryLexer.lexText},C.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(C.QueryLexer.EDIT_DISTANCE),C.QueryLexer.lexText},C.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(C.QueryLexer.BOOST),C.QueryLexer.lexText},C.QueryLexer.lexEOS=function(e){e.width()>0&&e.emit(C.QueryLexer.TERM)},C.QueryLexer.termSeparator=C.tokenizer.separator,C.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==C.QueryLexer.EOS)return C.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return C.QueryLexer.lexField;if("~"==t)return e.backup(),e.width()>0&&e.emit(C.QueryLexer.TERM),C.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),e.width()>0&&e.emit(C.QueryLexer.TERM),C.QueryLexer.lexBoost;if("+"==t&&1===e.width())return e.emit(C.QueryLexer.PRESENCE),C.QueryLexer.lexText;if("-"==t&&1===e.width())return e.emit(C.QueryLexer.PRESENCE),C.QueryLexer.lexText;if(t.match(C.QueryLexer.termSeparator))return C.QueryLexer.lexTerm}else e.escapeCharacter()}},C.QueryParser=function(e,t){this.lexer=new C.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0},C.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=C.QueryParser.parseClause;e;)e=e(this);return this.query},C.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},C.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},C.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},C.QueryParser.parseClause=function(e){var t=e.peekLexeme();if(null!=t)switch(t.type){case C.QueryLexer.PRESENCE:return C.QueryParser.parsePresence;case C.QueryLexer.FIELD:return C.QueryParser.parseField;case C.QueryLexer.TERM:return C.QueryParser.parseTerm;default:var r="expected either a field or a term, found "+t.type;throw t.str.length>=1&&(r+=" with value '"+t.str+"'"),new C.QueryParseError(r,t.start,t.end)}},C.QueryParser.parsePresence=function(e){var t=e.consumeLexeme();if(null!=t){switch(t.str){case"-":e.currentClause.presence=C.Query.presence.PROHIBITED;break;case"+":e.currentClause.presence=C.Query.presence.REQUIRED;break;default:var r="unrecognised presence operator'"+t.str+"'";throw new C.QueryParseError(r,t.start,t.end)}var n=e.peekLexeme();if(null==n){r="expecting term or field, found nothing";throw new C.QueryParseError(r,t.start,t.end)}switch(n.type){case C.QueryLexer.FIELD:return C.QueryParser.parseField;case C.QueryLexer.TERM:return C.QueryParser.parseTerm;default:r="expecting term or field, found '"+n.type+"'";throw new C.QueryParseError(r,n.start,n.end)}}},C.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(null!=t){if(-1==e.query.allFields.indexOf(t.str)){var r=e.query.allFields.map((function(e){return"'"+e+"'"})).join(", "),n="unrecognised field '"+t.str+"', possible fields: "+r;throw new C.QueryParseError(n,t.start,t.end)}e.currentClause.fields=[t.str];var s=e.peekLexeme();if(null==s){n="expecting term, found nothing";throw new C.QueryParseError(n,t.start,t.end)}switch(s.type){case C.QueryLexer.TERM:return C.QueryParser.parseTerm;default:n="expecting term, found '"+s.type+"'";throw new C.QueryParseError(n,s.start,s.end)}}},C.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(null!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var r=e.peekLexeme();if(null!=r)switch(r.type){case C.QueryLexer.TERM:return e.nextClause(),C.QueryParser.parseTerm;case C.QueryLexer.FIELD:return e.nextClause(),C.QueryParser.parseField;case C.QueryLexer.EDIT_DISTANCE:return C.QueryParser.parseEditDistance;case C.QueryLexer.BOOST:return C.QueryParser.parseBoost;case C.QueryLexer.PRESENCE:return e.nextClause(),C.QueryParser.parsePresence;default:var n="Unexpected lexeme type '"+r.type+"'";throw new C.QueryParseError(n,r.start,r.end)}else e.nextClause()}},C.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var n="edit distance must be numeric";throw new C.QueryParseError(n,t.start,t.end)}e.currentClause.editDistance=r;var s=e.peekLexeme();if(null!=s)switch(s.type){case C.QueryLexer.TERM:return e.nextClause(),C.QueryParser.parseTerm;case C.QueryLexer.FIELD:return e.nextClause(),C.QueryParser.parseField;case C.QueryLexer.EDIT_DISTANCE:return C.QueryParser.parseEditDistance;case C.QueryLexer.BOOST:return C.QueryParser.parseBoost;case C.QueryLexer.PRESENCE:return e.nextClause(),C.QueryParser.parsePresence;default:n="Unexpected lexeme type '"+s.type+"'";throw new C.QueryParseError(n,s.start,s.end)}else e.nextClause()}},C.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(null!=t){var r=parseInt(t.str,10);if(isNaN(r)){var n="boost must be numeric";throw new C.QueryParseError(n,t.start,t.end)}e.currentClause.boost=r;var s=e.peekLexeme();if(null!=s)switch(s.type){case C.QueryLexer.TERM:return e.nextClause(),C.QueryParser.parseTerm;case C.QueryLexer.FIELD:return e.nextClause(),C.QueryParser.parseField;case C.QueryLexer.EDIT_DISTANCE:return C.QueryParser.parseEditDistance;case C.QueryLexer.BOOST:return C.QueryParser.parseBoost;case C.QueryLexer.PRESENCE:return e.nextClause(),C.QueryParser.parsePresence;default:n="Unexpected lexeme type '"+s.type+"'";throw new C.QueryParseError(n,s.start,s.end)}else e.nextClause()}},e.exports=C}()})),dt=s((function(e,t){e.exports=function(e){e.stemmerSupport={Among:function(e,t,r,n){if(this.toCharArray=function(e){for(var t=e.length,r=new Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},!e&&""!=e||!t&&0!=t||!r)throw"Bad Among initialisation: s:"+e+", substring_i: "+t+", result: "+r;this.s_size=e.length,this.s=this.toCharArray(e),this.substring_i=t,this.result=r,this.method=n},SnowballProgram:function(){var e;return{bra:0,ket:0,limit:0,cursor:0,limit_backward:0,setCurrent:function(t){e=t,this.cursor=0,this.limit=t.length,this.limit_backward=0,this.bra=this.cursor,this.ket=this.limit},getCurrent:function(){var t=e;return e=null,t},in_grouping:function(t,r,n){if(this.cursor<this.limit){var s=e.charCodeAt(this.cursor);if(s<=n&&s>=r&&t[(s-=r)>>3]&1<<(7&s))return this.cursor++,!0}return!1},in_grouping_b:function(t,r,n){if(this.cursor>this.limit_backward){var s=e.charCodeAt(this.cursor-1);if(s<=n&&s>=r&&t[(s-=r)>>3]&1<<(7&s))return this.cursor--,!0}return!1},out_grouping:function(t,r,n){if(this.cursor<this.limit){var s=e.charCodeAt(this.cursor);if(s>n||s<r)return this.cursor++,!0;if(!(t[(s-=r)>>3]&1<<(7&s)))return this.cursor++,!0}return!1},out_grouping_b:function(t,r,n){if(this.cursor>this.limit_backward){var s=e.charCodeAt(this.cursor-1);if(s>n||s<r)return this.cursor--,!0;if(!(t[(s-=r)>>3]&1<<(7&s)))return this.cursor--,!0}return!1},eq_s:function(t,r){if(this.limit-this.cursor<t)return!1;for(var n=0;n<t;n++)if(e.charCodeAt(this.cursor+n)!=r.charCodeAt(n))return!1;return this.cursor+=t,!0},eq_s_b:function(t,r){if(this.cursor-this.limit_backward<t)return!1;for(var n=0;n<t;n++)if(e.charCodeAt(this.cursor-t+n)!=r.charCodeAt(n))return!1;return this.cursor-=t,!0},find_among:function(t,r){for(var n=0,s=r,i=this.cursor,o=this.limit,a=0,c=0,u=!1;;){for(var l=n+(s-n>>1),h=0,f=a<c?a:c,d=t[l],p=f;p<d.s_size;p++){if(i+f==o){h=-1;break}if(h=e.charCodeAt(i+f)-d.s[p])break;f++}if(h<0?(s=l,c=f):(n=l,a=f),s-n<=1){if(n>0||s==n||u)break;u=!0}}for(;;){if(a>=(d=t[n]).s_size){if(this.cursor=i+d.s_size,!d.method)return d.result;var m=d.method();if(this.cursor=i+d.s_size,m)return d.result}if((n=d.substring_i)<0)return 0}},find_among_b:function(t,r){for(var n=0,s=r,i=this.cursor,o=this.limit_backward,a=0,c=0,u=!1;;){for(var l=n+(s-n>>1),h=0,f=a<c?a:c,d=(p=t[l]).s_size-1-f;d>=0;d--){if(i-f==o){h=-1;break}if(h=e.charCodeAt(i-1-f)-p.s[d])break;f++}if(h<0?(s=l,c=f):(n=l,a=f),s-n<=1){if(n>0||s==n||u)break;u=!0}}for(;;){var p;if(a>=(p=t[n]).s_size){if(this.cursor=i-p.s_size,!p.method)return p.result;var m=p.method();if(this.cursor=i-p.s_size,m)return p.result}if((n=p.substring_i)<0)return 0}},replace_s:function(t,r,n){var s=n.length-(r-t),i=e.substring(0,t),o=e.substring(r);return e=i+n+o,this.limit+=s,this.cursor>=r?this.cursor+=s:this.cursor>t&&(this.cursor=t),s},slice_check:function(){if(this.bra<0||this.bra>this.ket||this.ket>this.limit||this.limit>e.length)throw"faulty slice operation"},slice_from:function(e){this.slice_check(),this.replace_s(this.bra,this.ket,e)},slice_del:function(){this.slice_from("")},insert:function(e,t,r){var n=this.replace_s(e,t,r);e<=this.bra&&(this.bra+=n),e<=this.ket&&(this.ket+=n)},slice_to:function(){return this.slice_check(),e.substring(this.bra,this.ket)},eq_v_b:function(e){return this.eq_s_b(e.length,e)}}}},e.trimmerSupport={generateTrimmer:function(e){var t=new RegExp("^[^"+e+"]+"),r=new RegExp("[^"+e+"]+$");return function(e){return"function"==typeof e.update?e.update((function(e){return e.replace(t,"").replace(r,"")})):e.replace(t,"").replace(r,"")}}}}})),pt=s((function(e,t){e.exports=function(e){if(void 0===e)throw new Error("Lunr is not present. Please include / require Lunr before this script.");if(void 0===e.stemmerSupport)throw new Error("Lunr stemmer support is not present. Please include / require Lunr stemmer support before this script.");var t,r,n;e.fr=function(){this.pipeline.reset(),this.pipeline.add(e.fr.trimmer,e.fr.stopWordFilter,e.fr.stemmer),this.searchPipeline&&(this.searchPipeline.reset(),this.searchPipeline.add(e.fr.stemmer))},e.fr.wordCharacters="A-Za-zªºÀ-ÖØ-öø-ʸˠ-ˤᴀ-ᴥᴬ-ᵜᵢ-ᵥᵫ-ᵷᵹ-ᶾḀ-ỿⁱⁿₐ-ₜKÅℲⅎⅠ-ↈⱠ-ⱿꜢ-ꞇꞋ-ꞭꞰ-ꞷꟷ-ꟿꬰ-ꭚꭜ-ꭤﬀ-ﬆＡ-Ｚａ-ｚ",e.fr.trimmer=e.trimmerSupport.generateTrimmer(e.fr.wordCharacters),e.Pipeline.registerFunction(e.fr.trimmer,"trimmer-fr"),e.fr.stemmer=(t=e.stemmerSupport.Among,r=e.stemmerSupport.SnowballProgram,n=new function(){var e,n,s,i=[new t("col",-1,-1),new t("par",-1,-1),new t("tap",-1,-1)],o=[new t("",-1,4),new t("I",0,1),new t("U",0,2),new t("Y",0,3)],a=[new t("iqU",-1,3),new t("abl",-1,3),new t("Ièr",-1,4),new t("ièr",-1,4),new t("eus",-1,2),new t("iv",-1,1)],c=[new t("ic",-1,2),new t("abil",-1,1),new t("iv",-1,3)],u=[new t("iqUe",-1,1),new t("atrice",-1,2),new t("ance",-1,1),new t("ence",-1,5),new t("logie",-1,3),new t("able",-1,1),new t("isme",-1,1),new t("euse",-1,11),new t("iste",-1,1),new t("ive",-1,8),new t("if",-1,8),new t("usion",-1,4),new t("ation",-1,2),new t("ution",-1,4),new t("ateur",-1,2),new t("iqUes",-1,1),new t("atrices",-1,2),new t("ances",-1,1),new t("ences",-1,5),new t("logies",-1,3),new t("ables",-1,1),new t("ismes",-1,1),new t("euses",-1,11),new t("istes",-1,1),new t("ives",-1,8),new t("ifs",-1,8),new t("usions",-1,4),new t("ations",-1,2),new t("utions",-1,4),new t("ateurs",-1,2),new t("ments",-1,15),new t("ements",30,6),new t("issements",31,12),new t("ités",-1,7),new t("ment",-1,15),new t("ement",34,6),new t("issement",35,12),new t("amment",34,13),new t("emment",34,14),new t("aux",-1,10),new t("eaux",39,9),new t("eux",-1,1),new t("ité",-1,7)],l=[new t("ira",-1,1),new t("ie",-1,1),new t("isse",-1,1),new t("issante",-1,1),new t("i",-1,1),new t("irai",4,1),new t("ir",-1,1),new t("iras",-1,1),new t("ies",-1,1),new t("îmes",-1,1),new t("isses",-1,1),new t("issantes",-1,1),new t("îtes",-1,1),new t("is",-1,1),new t("irais",13,1),new t("issais",13,1),new t("irions",-1,1),new t("issions",-1,1),new t("irons",-1,1),new t("issons",-1,1),new t("issants",-1,1),new t("it",-1,1),new t("irait",21,1),new t("issait",21,1),new t("issant",-1,1),new t("iraIent",-1,1),new t("issaIent",-1,1),new t("irent",-1,1),new t("issent",-1,1),new t("iront",-1,1),new t("ît",-1,1),new t("iriez",-1,1),new t("issiez",-1,1),new t("irez",-1,1),new t("issez",-1,1)],h=[new t("a",-1,3),new t("era",0,2),new t("asse",-1,3),new t("ante",-1,3),new t("ée",-1,2),new t("ai",-1,3),new t("erai",5,2),new t("er",-1,2),new t("as",-1,3),new t("eras",8,2),new t("âmes",-1,3),new t("asses",-1,3),new t("antes",-1,3),new t("âtes",-1,3),new t("ées",-1,2),new t("ais",-1,3),new t("erais",15,2),new t("ions",-1,1),new t("erions",17,2),new t("assions",17,3),new t("erons",-1,2),new t("ants",-1,3),new t("és",-1,2),new t("ait",-1,3),new t("erait",23,2),new t("ant",-1,3),new t("aIent",-1,3),new t("eraIent",26,2),new t("èrent",-1,2),new t("assent",-1,3),new t("eront",-1,2),new t("ât",-1,3),new t("ez",-1,2),new t("iez",32,2),new t("eriez",33,2),new t("assiez",33,3),new t("erez",32,2),new t("é",-1,2)],f=[new t("e",-1,3),new t("Ière",0,2),new t("ière",0,2),new t("ion",-1,1),new t("Ier",-1,2),new t("ier",-1,2),new t("ë",-1,4)],d=[new t("ell",-1,-1),new t("eill",-1,-1),new t("enn",-1,-1),new t("onn",-1,-1),new t("ett",-1,-1)],p=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,128,130,103,8,5],m=[1,65,20,0,0,0,0,0,0,0,0,0,0,0,0,0,128],g=new r;function v(e,t,r){return!(!g.eq_s(1,e)||(g.ket=g.cursor,!g.in_grouping(p,97,251))||(g.slice_from(t),g.cursor=r,0))}function y(e,t,r){return!!g.eq_s(1,e)&&(g.ket=g.cursor,g.slice_from(t),g.cursor=r,!0)}function k(){for(;!g.in_grouping(p,97,251);){if(g.cursor>=g.limit)return!0;g.cursor++}for(;!g.out_grouping(p,97,251);){if(g.cursor>=g.limit)return!0;g.cursor++}return!1}function b(){return s<=g.cursor}function w(){return n<=g.cursor}function _(){return e<=g.cursor}function R(){if(!function(){var e,t;if(g.ket=g.cursor,e=g.find_among_b(u,43)){switch(g.bra=g.cursor,e){case 1:if(!_())return!1;g.slice_del();break;case 2:if(!_())return!1;g.slice_del(),g.ket=g.cursor,g.eq_s_b(2,"ic")&&(g.bra=g.cursor,_()?g.slice_del():g.slice_from("iqU"));break;case 3:if(!_())return!1;g.slice_from("log");break;case 4:if(!_())return!1;g.slice_from("u");break;case 5:if(!_())return!1;g.slice_from("ent");break;case 6:if(!b())return!1;if(g.slice_del(),g.ket=g.cursor,e=g.find_among_b(a,6))switch(g.bra=g.cursor,e){case 1:_()&&(g.slice_del(),g.ket=g.cursor,g.eq_s_b(2,"at")&&(g.bra=g.cursor,_()&&g.slice_del()));break;case 2:_()?g.slice_del():w()&&g.slice_from("eux");break;case 3:_()&&g.slice_del();break;case 4:b()&&g.slice_from("i")}break;case 7:if(!_())return!1;if(g.slice_del(),g.ket=g.cursor,e=g.find_among_b(c,3))switch(g.bra=g.cursor,e){case 1:_()?g.slice_del():g.slice_from("abl");break;case 2:_()?g.slice_del():g.slice_from("iqU");break;case 3:_()&&g.slice_del()}break;case 8:if(!_())return!1;if(g.slice_del(),g.ket=g.cursor,g.eq_s_b(2,"at")&&(g.bra=g.cursor,_()&&(g.slice_del(),g.ket=g.cursor,g.eq_s_b(2,"ic")))){g.bra=g.cursor,_()?g.slice_del():g.slice_from("iqU");break}break;case 9:g.slice_from("eau");break;case 10:if(!w())return!1;g.slice_from("al");break;case 11:if(_())g.slice_del();else{if(!w())return!1;g.slice_from("eux")}break;case 12:if(!w()||!g.out_grouping_b(p,97,251))return!1;g.slice_del();break;case 13:return b()&&g.slice_from("ant"),!1;case 14:return b()&&g.slice_from("ent"),!1;case 15:return t=g.limit-g.cursor,g.in_grouping_b(p,97,251)&&b()&&(g.cursor=g.limit-t,g.slice_del()),!1}return!0}return!1}()&&(g.cursor=g.limit,!function(){var e,t;if(g.cursor<s)return!1;if(t=g.limit_backward,g.limit_backward=s,g.ket=g.cursor,!(e=g.find_among_b(l,35)))return g.limit_backward=t,!1;if(g.bra=g.cursor,1==e){if(!g.out_grouping_b(p,97,251))return g.limit_backward=t,!1;g.slice_del()}return g.limit_backward=t,!0}()&&(g.cursor=g.limit,!function(){var e,t,r;if(g.cursor<s)return!1;if(t=g.limit_backward,g.limit_backward=s,g.ket=g.cursor,!(e=g.find_among_b(h,38)))return g.limit_backward=t,!1;switch(g.bra=g.cursor,e){case 1:if(!_())return g.limit_backward=t,!1;g.slice_del();break;case 2:g.slice_del();break;case 3:g.slice_del(),r=g.limit-g.cursor,g.ket=g.cursor,g.eq_s_b(1,"e")?(g.bra=g.cursor,g.slice_del()):g.cursor=g.limit-r}return g.limit_backward=t,!0}())))return g.cursor=g.limit,void function(){var e,t,r,n,i=g.limit-g.cursor;if(g.ket=g.cursor,g.eq_s_b(1,"s")?(g.bra=g.cursor,t=g.limit-g.cursor,g.out_grouping_b(m,97,232)?(g.cursor=g.limit-t,g.slice_del()):g.cursor=g.limit-i):g.cursor=g.limit-i,g.cursor>=s){if(r=g.limit_backward,g.limit_backward=s,g.ket=g.cursor,e=g.find_among_b(f,7))switch(g.bra=g.cursor,e){case 1:if(_()){if(n=g.limit-g.cursor,!g.eq_s_b(1,"s")&&(g.cursor=g.limit-n,!g.eq_s_b(1,"t")))break;g.slice_del()}break;case 2:g.slice_from("i");break;case 3:g.slice_del();break;case 4:g.eq_s_b(2,"gu")&&g.slice_del()}g.limit_backward=r}}();g.cursor=g.limit,g.ket=g.cursor,g.eq_s_b(1,"Y")?(g.bra=g.cursor,g.slice_from("i")):(g.cursor=g.limit,g.eq_s_b(1,"ç")&&(g.bra=g.cursor,g.slice_from("c")))}this.setCurrent=function(e){g.setCurrent(e)},this.getCurrent=function(){return g.getCurrent()},this.stem=function(){var t=g.cursor;return function(){for(var e,t;;){if(e=g.cursor,g.in_grouping(p,97,251)){if(g.bra=g.cursor,t=g.cursor,v("u","U",e))continue;if(g.cursor=t,v("i","I",e))continue;if(g.cursor=t,y("y","Y",e))continue}if(g.cursor=e,g.bra=e,!v("y","Y",e)){if(g.cursor=e,g.eq_s(1,"q")&&(g.bra=g.cursor,y("u","U",e)))continue;if(g.cursor=e,e>=g.limit)return;g.cursor++}}}(),g.cursor=t,function(){var t=g.cursor;if(s=g.limit,n=s,e=s,g.in_grouping(p,97,251)&&g.in_grouping(p,97,251)&&g.cursor<g.limit)g.cursor++;else if(g.cursor=t,!g.find_among(i,3)){g.cursor=t;do{if(g.cursor>=g.limit){g.cursor=s;break}g.cursor++}while(!g.in_grouping(p,97,251))}s=g.cursor,g.cursor=t,k()||(n=g.cursor,k()||(e=g.cursor))}(),g.limit_backward=t,g.cursor=g.limit,R(),g.cursor=g.limit,function(){var e=g.limit-g.cursor;g.find_among_b(d,5)&&(g.cursor=g.limit-e,g.ket=g.cursor,g.cursor>g.limit_backward&&(g.cursor--,g.bra=g.cursor,g.slice_del()))}(),g.cursor=g.limit,function(){for(var e,t=1;g.out_grouping_b(p,97,251);)t--;if(t<=0){if(g.ket=g.cursor,e=g.limit-g.cursor,!g.eq_s_b(1,"é")&&(g.cursor=g.limit-e,!g.eq_s_b(1,"è")))return;g.bra=g.cursor,g.slice_from("e")}}(),g.cursor=g.limit_backward,function(){for(var e,t;t=g.cursor,g.bra=t,e=g.find_among(o,4);)switch(g.ket=g.cursor,e){case 1:g.slice_from("i");break;case 2:g.slice_from("u");break;case 3:g.slice_from("y");break;case 4:if(g.cursor>=g.limit)return;g.cursor++}}(),!0}},function(e){return"function"==typeof e.update?e.update((function(e){return n.setCurrent(e),n.stem(),n.getCurrent()})):(n.setCurrent(e),n.stem(),n.getCurrent())}),e.Pipeline.registerFunction(e.fr.stemmer,"stemmer-fr"),e.fr.stopWordFilter=e.generateStopWordFilter("ai aie aient aies ait as au aura aurai auraient aurais aurait auras aurez auriez aurions aurons auront aux avaient avais avait avec avez aviez avions avons ayant ayez ayons c ce ceci celà ces cet cette d dans de des du elle en es est et eu eue eues eurent eus eusse eussent eusses eussiez eussions eut eux eûmes eût eûtes furent fus fusse fussent fusses fussiez fussions fut fûmes fût fûtes ici il ils j je l la le les leur leurs lui m ma mais me mes moi mon même n ne nos notre nous on ont ou par pas pour qu que quel quelle quelles quels qui s sa sans se sera serai seraient serais serait seras serez seriez serions serons seront ses soi soient sois soit sommes son sont soyez soyons suis sur t ta te tes toi ton tu un une vos votre vous y à étaient étais était étant étiez étions été étée étées étés êtes".split(" ")),e.Pipeline.registerFunction(e.fr.stopWordFilter,"stopWordFilter-fr")}}));
/*!
   * Snowball JavaScript Library v0.3
   * http://code.google.com/p/urim/
   * http://snowball.tartarus.org/
   *
   * Copyright 2010, Oleg Mazko
   * http://www.mozilla.org/MPL/
   */function mt(e){let t,r,n=e[0].emails[0]+"";return{c(){t=k("strong"),r=b(n),R(t,"class","rf-fi-account-fill rf-btn--icon-left")},m(e,n){g(e,t,n),m(t,r)},p(e,t){1&t&&n!==(n=e[0].emails[0]+"")&&x(r,n)},d(e){e&&v(t)}}}function gt(e){let t;return{c(){t=k("a"),t.textContent="Se connecter",R(t,"href","https://urbanvitaliz.fr/login/"),R(t,"class","rf-btn rf-fi-account-fill rf-btn--icon-left"),R(t,"aria-expanded","false")},m(e,r){g(e,t,r)},p:o,d(e){e&&v(t)}}}function vt(e){let t,r,n,s,i,a,c,l,h,f,d,p,y,b,x,C,S,E,L;function T(e,t){return void 0===e[0]?gt:mt}let P=T(e),Q=P(e);return{c(){Q.c(),t=w(),r=k("dialog"),n=k("div"),s=k("div"),i=k("div"),a=k("div"),c=k("form"),l=k("div"),l.innerHTML='<button type="button" class="rf-link--close rf-link svelte-14wsiwu" title="Fermer la fenêtre modale" aria-controls="rf-modal-login" target="_self">Fermer</button>',h=w(),f=k("div"),d=k("h1"),d.textContent="Se connecter",p=w(),y=k("label"),y.textContent="Email",b=w(),x=k("input"),C=w(),S=k("div"),S.innerHTML='<ul class="rf-btns-group rf-btns-group--inline-lg rf-btns-group--icon-left"><li><button type="submit" class="rf-btn svelte-14wsiwu">Connexion</button></li></ul>',R(l,"class","rf-modal__header"),R(d,"id","rf-modal-title-modal-2"),R(d,"class","rf-modal__title"),R(y,"class","rf-label"),R(y,"for","text-input-text"),R(x,"class","rf-input"),R(x,"type","email"),R(x,"placeholder","perrine@commune.fr"),R(x,"autocomplete","email"),R(x,"name","urbanvitaliz-email"),R(f,"class","rf-modal__content svelte-14wsiwu"),R(S,"class","rf-modal__footer"),R(a,"class","rf-modal__body"),R(i,"class","rf-col-12 rf-col-md-6"),R(s,"class","rf-grid-row rf-grid-row--center"),R(n,"class","rf-container--fluid rf-container-md"),R(r,"aria-labelledby","rf-modal-title-modal-2"),R(r,"role","dialog"),R(r,"id","rf-modal-login"),R(r,"class","rf-modal svelte-14wsiwu")},m(o,u){Q.m(o,u),g(o,t,u),g(o,r,u),m(r,n),m(n,s),m(s,i),m(i,a),m(a,c),m(c,l),m(c,h),m(c,f),m(f,d),m(f,p),m(f,y),m(f,b),m(f,x),$(x,e[1]),m(c,C),m(c,S),E||(L=[_(x,"input",e[3]),_(c,"submit",e[2])],E=!0)},p(e,[r]){P===(P=T(e))&&Q?Q.p(e,r):(Q.d(1),Q=P(e),Q&&(Q.c(),Q.m(t.parentNode,t))),2&r&&x.value!==e[1]&&$(x,e[1])},i:o,o:o,d(e){Q.d(e),e&&v(t),e&&v(r),E=!1,u(L)}}}function yt(e,t,r){const n=L();let s="",{person:i}=t;return e.$$set=e=>{"person"in e&&r(0,i=e.person)},[i,s,e=>{e.preventDefault(),n("email",s)},function(){s=this.value,r(1,s)}]}class kt extends Z{constructor(e){super(),K(this,e,yt,vt,h,{person:0})}}const bt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~".split("");var wt=(e=>(t=20)=>{if(!(t>=0&&Number.isFinite(t)))throw new TypeError("Expected a `length` to be a non-negative finite number");return e(t,bt)})((e,t)=>{const r=t.length,n=Math.floor(65536/r)*r-1,s=2*Math.ceil(1.1*e);let i="",o=0;for(;o<e;){const a=new Uint16Array(s);crypto.getRandomValues(a);let c=0;for(;c<s&&o<e;){const e=a[c];c+=2,e>n||(i+=t[e%r],o++)}}return i});dt(ft),pt(ft);const _t=new function({state:e,mutations:t}){let r=e;const n=new Set;let s=!1;return{get state(){return r},mutations:function e(t,i=[]){return new Proxy(t,{get(t,r){if(r in t)return e(t[r],[...i,r]);throw new TypeError(`No ${r} property in \`mutations.${i.join(".")}\``)},apply(e,t,o){if("function"!=typeof e)throw new TypeError(`\`mutations.${i.join(".")}\` is not a function`);{const t=Reflect.apply(e,void 0,[r,...o]);return void 0!==t&&(r=t),s||(s=!0,Promise.resolve().then(()=>{for(const e of n)try{e(r)}catch(e){console.error("subscriber error",e)}s=!1})),t}}})}(t),subscribe:e=>(n.add(e),()=>{n.delete(e)})}}({state:{"étapes":[],"thématiques":[],filters:{"étapes":new Set,"thématiques":new Set},allResources:void 0,relevantResources:[],currentPerson:void 0,currentRessourceCollection:void 0,allPersons:[]},mutations:{"setÉtapes"(e,t){e.étapes=t},"setThématiques"(e,t){e.thématiques=t},setRelevantResources(e,t){e.relevantResources=t},setAllResources(e,t){e.allResources=t},setCurrentPerson(e,t){e.currentPerson=t},setCurrentRessourceCollection(e,t){e.currentRessourceCollection=t},setAllPersons(e,t){e.allPersons=t},"toggleÉtapeFilter"(e,t){e.filters.étapes.has(t)?e.filters.étapes.delete(t):e.filters.étapes.add(t),e.relevantResources=Se(e.allResources,e.filters)},"toggleThématiquesFilter"(e,t){e.filters.thématiques.has(t)?e.filters.thématiques.delete(t):e.filters.thématiques.add(t),e.relevantResources=Se(e.allResources,e.filters)},addResourceIdToCurrentRessourceCollection(e,t){e.currentRessourceCollection.ressources_ids.push(t)},removeResourceIdFromCurrentRessourceCollection(e,t){e.currentRessourceCollection.ressources_ids=e.currentRessourceCollection.ressources_ids.filter(e=>e!==t)}}}),Rt=document.querySelector(".svelte-main");let xt,$t;function Ct(e,t){if(!t)throw new Error("Missing _mapStateToProps in replaceComponent");xt&&xt.$destroy(),xt=e,$t=t}function St(){return n(oe+"/allRessources.json").then(e=>e.map(lt)).then(e=>{const t=new Set(e.map(e=>e.etape).flat().sort()),r=new Set(e.map(e=>e.thematique).flat().sort());_t.mutations.setÉtapes([...t]),_t.mutations.setThématiques([...r]),_t.mutations.setAllResources(e),_t.mutations.setRelevantResources(Se(e,_t.state.filters))})}_t.subscribe((function(e){const t=$t(e);xt.$set(t)})),i.base(oe),console.log("page.base",i.base());const Et=function(e){const t=new kt({target:document.querySelector("header .rf-shortcuts__item"),props:{}});return t.$on("email",r=>{const s=r.detail,i=wt();n(`${ut}/login-by-email?email=${s}&secret=${i}`,{method:"POST"}).then(({person:r})=>{document.querySelector('dialog#rf-modal-login button[aria-controls="rf-modal-login"].rf-link--close').click(),t.$set({person:r}),e({person:r})}).catch(e=>console.error("error fetch email",e))}),function(e){t.$set({person:e})}}(({person:e})=>{console.log("login succesful",e),i(function(e){const{firstAccessCapability:t}=e;return`${oe}/person?secret=${t}`}(e))});function Lt(e){return function(r){return function(){return _t.mutations.addResourceIdToCurrentRessourceCollection(r),t(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({add:r})})}}}function Tt(e){return r=>()=>(_t.mutations.removeResourceIdFromCurrentRessourceCollection(r),t(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({delete:r})}))}function Pt(e){const{content:t,phrase_catch:r,etape:n,thematique:s,keywords:i,id:o}=e;return{content:Qt(t),phrase_catch:Qt(r),etape:Qt(n),thematique:Qt(Array.isArray(s)?s.join(", "):s),keywords:Qt(i),id:o}}function Qt(e){return"string"==typeof e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0}i("/person",e=>{const t=new URLSearchParams(e.querystring).get("secret");n(`${ut}/first-access?secret=${t}`).then(e=>{_t.mutations.setCurrentPerson(e.person),_t.mutations.setCurrentRessourceCollection(e.ressourceCollection),Et(e.person),i(ht(e.ressourceCollection))})}),i("/toutes-les-ressources",()=>{function e(e){const{"étapes":t,"thématiques":r,allResources:n}=e;return{allEtapes:t,"allThématiques":r,allResources:n,makeBookmarkResource:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?Lt(e.currentRessourceCollection.edit_capability):void 0,makeUnbookmarkResource:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?Tt(e.currentRessourceCollection.edit_capability):void 0,bookmarkedResourceIdSet:new Set(e.currentRessourceCollection&&e.currentRessourceCollection.ressources_ids),listeRessourceURL:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?ht(e.currentRessourceCollection):void 0}}const t=new Pe({target:document.querySelector(".svelte-main"),props:e(_t.state)});St(),Ct(t,e)}),i("/liste-ressources",e=>{const t=new URLSearchParams(e.querystring).get("secret");function r(e){return{bookmarkedResources:e.allResources&&e.currentRessourceCollection?e.allResources.filter(t=>e.currentRessourceCollection.ressources_ids.includes(t.id)):void 0,makeBookmarkResource:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?Lt(e.currentRessourceCollection.edit_capability):void 0,makeUnbookmarkResource:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?Tt(e.currentRessourceCollection.edit_capability):void 0,recommendations:e.allResources&&e.currentRessourceCollection&&e.currentRessourceCollection.recommendations?e.currentRessourceCollection.recommendations.map(({ressourceId:t,message:r})=>({resource:e.allResources.find(e=>e.id===t),message:r})):void 0}}Ct(new Ae({target:Rt,props:r(_t.state)}),r),n(`${ut}/liste-ressources?secret=${t}`).then(e=>{0!==e.ressources_ids.length||e.recommendations||i("/toutes-les-ressources"),_t.mutations.setCurrentRessourceCollection(e)}),St()}),i("/recherche-ressource",e=>{function t(e){const{"étapes":t,"thématiques":r,filters:n,relevantResources:s,allResources:i}=e;let o;if(console.log("allResources:",i),e.allResources){const t=ft((function(){this.field("content"),this.field("phrase_catch"),this.field("etape"),this.field("thematique",{boost:2}),this.field("keywords",{boost:5}),this.ref("id");for(const t of e.allResources)this.add(Pt(t))}));o=function(e){const r=t.search(Qt(e.replaceAll(":","")));let o=s;return 0===n.étapes.size&&0===n.thématiques.size&&(o=i),r.map(e=>o.find(t=>t.id===e.ref)).filter(e=>void 0!==e)}}return{"étapes":t,"thématiques":r,allResources:i,filters:n,"étapeFilterChange":_t.mutations.toggleÉtapeFilter,"thématiqueFilterChange":_t.mutations.toggleThématiquesFilter,findRelevantRessources:o,makeBookmarkResource:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?Lt(e.currentRessourceCollection.edit_capability):void 0,makeUnbookmarkResource:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?Tt(e.currentRessourceCollection.edit_capability):void 0,bookmarkedResourceIdSet:new Set(e.currentRessourceCollection&&e.currentRessourceCollection.ressources_ids),listeRessourceURL:e.currentRessourceCollection&&e.currentRessourceCollection.edit_capability?ht(e.currentRessourceCollection):void 0}}Ct(new We({target:Rt,props:t(_t.state)}),t),St()}),i("/envoi-recommandation",e=>{function r(e){return{persons:e.allPersons,ressources:e.allResources,sendRecommandation:(e,r,n)=>(console.log("sendRecommandation",e,r,n),t(ut+"/recommend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({personId:e._id,ressourceId:r.id,message:n})}))}}const s=new et({target:Rt,props:r(_t.state)});n(ut+"/persons").then(e=>{const t=e;_t.mutations.setAllPersons(t)}),Ct(s,r),St()}),i("/ressources/*",e=>{function t(t){console.log(t.allResources);const r=t.allResources?t.allResources.find(t=>t.url===e.pathname||t.url===e.pathname+".html"):{},n=t.currentRessourceCollection&&t.currentRessourceCollection.edit_capability?Lt(t.currentRessourceCollection.edit_capability):void 0,s=new Set(t.currentRessourceCollection&&t.currentRessourceCollection.ressources_ids),i=t.currentRessourceCollection&&t.currentRessourceCollection.edit_capability?Tt(t.currentRessourceCollection.edit_capability):void 0;return{ressource:r,bookmarkResource:n&&!s.has(r.id)&&n(r.id),unbookmarkResource:i&&s.has(r.id)&&i(r.id),listeRessourceURL:t.currentRessourceCollection&&t.currentRessourceCollection.edit_capability?ht(t.currentRessourceCollection):void 0}}Ct(new ct({target:Rt,props:t(_t.state)}),t),St()}),i.start()}();
//# sourceMappingURL=spa.rollup.js.map
